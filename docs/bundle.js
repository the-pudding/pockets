!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(){return new Promise(function(t,e){!function(t){d3.loadData("assets/data/measurementsRectangles.json",function(e,n){var a=n[0].map(function(t,e){return r({},t,{waistSize:+t.waistSize,price:+t.price,maxHeightFront:+t.maxHeightFront,minHeightFront:+t.minHeightFront,rivetHeightFront:+t.rivetHeightFront,maxWidthFront:+t.maxWidthFront,minWidthFront:+t.minWidthFront,maxHeightBack:+t.maxHeightBack,minHeightBack:+t.minHeightBack,maxWidthBack:+t.maxWidthBack,minWidthBack:+t.minWidthBack})});t(e,a)})}(function(n,r){n?e("error loading data"):t(r)})})}},function(t,e,n){"use strict";var r=u(n(2)),a=u(n(4)),i=(u(n(5)),u(n(7))),o=u(n(11)),s=u(n(13)),l=u(n(16));function u(t){return t&&t.__esModule?t:{default:t}}u(n(17));var c=d3.select("body"),d=0;c.classed("is-mobile",a.default.any()),window.addEventListener("resize",(0,r.default)(function(){var t=c.node().offsetWidth;d!==t&&(d=t,i.default.resize(),o.default.resize(),s.default.resize())},150)),function(){if(c.select("header").classed("is-sticky")){var t=c.select(".header__menu"),e=c.select(".header__toggle");e.on("click",function(){var n=t.classed("is-visible");t.classed("is-visible",!n),e.classed("is-visible",!n)})}}(),(0,l.default)({selector:".scroll",offset:.5,enter:function(t){var e=d3.select(".logo"),n=d3.select(".is-sticky");e.transition().duration(300).style("display","none").style("opacity","0"),n.transition().duration(200).style("height","35px")},exit:function(t){var e=d3.select(".logo");d3.select(".is-sticky").transition().duration(200).style("height","155px"),e.transition().duration(300).style("display","block").style("opacity","1")}}),d3.selectAll(".pocket-wrapper").on("click",function(){this.classList.toggle("animation-check")}),i.default.init(),o.default.init(),s.default.init()},function(t,e,n){(function(e){var n=NaN,r="[object Symbol]",a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,d=u||c||Function("return this")(),h=Object.prototype.toString,m=Math.max,g=Math.min,f=function(){return d.Date.now()};function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function v(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&h.call(t)==r}(t))return n;if(p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var u=o.test(t);return u||s.test(t)?l(t.slice(2),u?2:8):i.test(t)?n:+t}t.exports=function(t,e,n){var r,a,i,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function x(e){var n=r,i=a;return r=a=void 0,u=e,o=t.apply(i,n)}function b(t){var n=t-l;return void 0===l||n>=e||n<0||d&&t-u>=i}function k(){var t=f();if(b(t))return y(t);s=setTimeout(k,function(t){var n=e-(t-l);return d?g(n,i-(t-u)):n}(t))}function y(t){return s=void 0,h&&r?x(t):(r=a=void 0,o)}function H(){var t=f(),n=b(t);if(r=arguments,a=this,l=t,n){if(void 0===s)return function(t){return u=t,s=setTimeout(k,e),c?x(t):o}(l);if(d)return s=setTimeout(k,e),x(l)}return void 0===s&&(s=setTimeout(k,e)),o}return e=v(e)||0,p(n)&&(c=!!n.leading,i=(d="maxWait"in n)?m(v(n.maxWait)||0,e):i,h="trailing"in n?!!n.trailing:h),H.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=a=s=void 0},H.flush=function(){return void 0===s?o:y(f())},H}}).call(this,n(3))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n(6);var a=null,i=d3.selectAll(".area-graphic");e.default={init:function(){return new Promise(function(t){d3.loadData("assets/data/measurements.csv",function(e,n){a=n[0].map(function(t,e){return r({},t,{waistSize:+t.waistSize,price:+t.price,maxHeightFront:+t.maxHeightFront,minHeightFront:+t.minHeightFront,rivetHeightFront:+t.rivetHeightFront,maxWidthFront:+t.maxWidthFront,minWidthFront:+t.minWidthFront,maxHeightBack:+t.maxHeightBack,minHeightBack:+t.minHeightBack,maxWidthBack:+t.maxWidthBack,minWidthBack:+t.minWidthBack})}),function(){var t=i,e=a.map(function(t){var e;return e="boot-cut"==t.style?"straight":"regular"==t.style?"straight":"slim"==t.style?"skinny":t.style,r({},t,{updatedStyle:e,group:t.menWomen+" - "+e})}),n=d3.nest().key(function(t){return t.group}).entries(e);t.selectAll(".chart").data(n).enter().append("div.chart").areaChart()}(),t()})})},resize:function(){}}},function(t,e,n){"use strict";d3.selection.prototype.areaChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r=0,a=0,i=d3.scaleLinear(),o=null,s=null,l={init:function(){e.append("text").text(function(t){return""+t.key});var t=e.append("div.container");(o=t.append("svg.area-front")).append("g").append("g.g-vis"),(s=t.append("svg.area-back")).append("g").append("g.g-vis"),l.resize(),l.render()},resize:function(){return r=e.node().offsetWidth-0-0,a=e.node().offsetHeight-0-0,o.at({width:r+0+0,height:a+0+0}),s.at({width:r+0+0,height:a+0+0}),i.domain([0,29]).range([0,280]),l},render:function(){return o.select(".g-vis").selectAll(".outline").data(function(t){return t.values}).enter().append("path").attr("d",function(t){var e=["M",[10,10],"l",[0,i(t.maxHeightFront)],"q",[i(t.maxWidthFront/2),i(.1*t.maxHeightFront)],[i(t.maxWidthFront),i(t.minHeightFront-t.maxHeightFront)],"l",[0,-i(t.minHeightFront-t.rivetHeightFront)],"q",[-i(2*t.minWidthFront/3),i(.1*t.maxHeightFront)],[-i(t.minWidthFront),-i(t.rivetHeightFront)],"l",[-i(t.maxWidthFront-t.minWidthFront),0]],n=e.filter(function(t){return!["M","l","L","Q","q"].includes(t)});return d3.polygonArea(n),e.join(" ")}).attr("class","outline"),s.select(".g-vis").selectAll(".outline").data(function(t){return t.values}).enter().append("path").attr("d",function(t){var e=["M",[10,10],"l",[i((t.maxWidthBack-t.minWidthBack)/2),i(t.minHeightBack)],"l",[i(t.minWidthBack/2),i(t.maxHeightBack-t.minHeightBack)],"l",[i(t.minWidthBack/2),-i(t.maxHeightBack-t.minHeightBack)],"l",[i((t.maxWidthBack-t.minWidthBack)/2),-i(t.minHeightBack)],"l",[-i(t.maxWidthBack),0]],n=e.filter(function(t){return!["M","l","L","Q","q"].includes(t)});return d3.polygonArea(n),e.join(" ")}).attr("class","outline"),l},data:function(t){return arguments.length?(n=t,e.datum(n),l.render(),l):n}};return l.init(),l});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(0));n(8);var a=i(n(9));function i(t){return t&&t.__esModule?t:{default:t}}i(n(10));var o=null,s=(0,a.default)(),l=null,u=null,c=d3.selectAll(".scroll-graphic"),d=d3.selectAll(".scroll"),h=d.select(".scroll-graphic"),m=(h.select(".scroll-svg"),d.select(".scroll-text").selectAll(".step"));function g(){window.innerWidth;var t=Math.floor(window.innerHeight);m.style("height",t+"px");var e=d.node().offsetWidth;h.style("width",e+"px"),s.resize(),u()}function f(t){var e=t.index;l(e)}e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){o=t[0],function(){var t=c,e=(d3.nest().key(function(t){return t.menWomen}).entries(o),d3.nest().key(function(t){return t.menWomen}).rollup(function(t,e){var n={brand:"average",maxHeightFront:d3.round(d3.mean(t,function(t){return t.maxHeightFront}),1),minHeightFront:d3.round(d3.mean(t,function(t){return t.minHeightFront}),1),rivetHeightFront:d3.round(d3.mean(t,function(t){return t.rivetHeightFront}),1),maxWidthFront:d3.round(d3.mean(t,function(t){return t.maxWidthFront}),1),minWidthFront:d3.round(d3.mean(t,function(t){return t.minWidthFront}),1),maxHeightBack:d3.round(d3.mean(t,function(t){return t.maxHeightBack}),1),minHeightBack:d3.round(d3.mean(t,function(t){return t.minHeightBack}),1),maxWidthBack:d3.round(d3.mean(t,function(t){return t.maxWidthBack}),1),minWidthBack:d3.round(d3.mean(t,function(t){return t.minWidthBack}),1)};return t[t.length]=n,t}).entries(o)),n=t.datum(e).scrollChart();l=n.toggle,u=n.resize,g(),s.setup({container:".scroll",graphic:".scroll-graphic",text:".scroll-text",step:".step",debug:!1,offset:.85}).onStepEnter(f)}()}).catch(function(t){return console.log(t)})},resize:g}},function(t,e,n){"use strict";d3.selection.prototype.scrollChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r=0,a=0,i=0,o=60,s=40,l="rgba(231, 80, 63, 0.2)",u="rgba(246, 194, 47, 0.2)",c=d3.scaleLinear(),d=null,h=null,m=n.filter(function(t){return"men"==t.key})[0].value,g=d3.max(m.map(function(t){return t.maxWidthFront})),f=null,p={init:function(){var t=e.append("div.container");d=t.append("svg.scroll-svg"),h=d.selectAll(".group-mw").data(n).enter().append("g").attr("class",function(t){return"group-mw group-"+t.key}),p.resize(),p.render()},resize:function(){return r=e.node().offsetWidth-s-25,a=.6*r,d.at({width:r+s+25,height:a+o+0}),i=r+s+25,c.domain([0,29]).range([0,.55*r]),f=c(g),e.selectAll(".outline, .outline-average").size()>0&&p.update(),p},render:function(){h.selectAll(".outline").data(function(t){return t.value}).enter().append("path").attr("class",function(t){return"average"==t.brand?"outline-average":"outline"}).attr("stroke-dasharray",function(t){return this.getTotalLength()}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).style("fill","none"),h.selectAll(".label").data(function(t){return[t]}).enter().append("text").text(function(t){return t.key}).attr("class","label tk-atlas");var t=h.append("g").attr("class","g-measurements").attr("opacity",0);return t.selectAll(".measure-line-maxHeight").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("path").attr("class",function(t){return t.maxHeightFront<20?"measure-line measure-line-maxHeight measure-line-woman":"measure-line measure-line-maxHeight measure-line-man"}),t.selectAll(".measure-line-maxWidth").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("path").attr("class",function(t){return t.maxHeightFront<20?"measure-line measure-line-maxWidth measure-line-woman":"measure-line measure-line-maxWidth measure-line-man"}),t.selectAll(".measure-maxHeight-bg").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class","tk-atlas measure-bg measure-maxHeight-bg"),t.selectAll(".measure measure-maxHeight").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class","tk-atlas measure measure-maxHeight"),t.selectAll(".measure-maxWidth-bg").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class","tk-atlas measure-bg measure-maxWidth-bg"),t.selectAll(".measure measure-maxWidth").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class","tk-atlas measure measure-maxWidth"),p.update(),p},update:function(){h.selectAll(".outline, .outline-average").attr("d",function(t){var e=[10,10],n=[10,10+c(t.maxHeightFront)],r=[10+c(t.maxWidthFront/2),c(t.maxHeightFront+2)+10],a=[10+c(.8*t.maxWidthFront),c(.8*t.maxHeightFront)+10],i=[10+c(t.maxWidthFront),c(t.minHeightFront)+10],o=[10+c(t.maxWidthFront),c(t.minHeightFront)+10],s=[10+c(t.maxWidthFront-3),c(t.maxHeightFront)+10],l=[10+c(t.maxWidthFront),c(t.rivetHeightFront)+10],u=[10+c(t.maxWidthFront),c(t.rivetHeightFront)+10],d=[10+c(1.5*(t.maxWidthFront-t.minWidthFront)),c(t.rivetHeightFront)+10],h=[10+c(t.maxWidthFront-t.minWidthFront),10];return("TRUE"==t.cutout?["M",e,"L",n,"L",s,"Q",a,o,"L",l,"Q",d,h,"L",e]:["M",e,"L",n,"Q",r,i,"L",u,"Q",d,h,"L",e]).join(" ")});var t=h.selectAll(".g-measurements");return t.selectAll(".measure-line-maxHeight").attr("d",function(t){return(t.maxHeightFront<20?["M",[10,10],"l",[-20,0],"l",[0,c(t.maxHeightFront)],"l",[10,0]]:["M",[10,10],"l",[-48,0],"l",[0,c(t.maxHeightFront)],"l",[48,0]]).join(" ")}),t.selectAll(".measure-line-maxWidth").attr("d",function(t){return(t.maxHeightFront<20?["M",[10,10],"l",[0,-20],"l",[c(t.maxWidthFront),0],"l",[0,c(t.minHeightFront-t.rivetHeightFront)]]:["M",[10,10],"l",[0,-48],"l",[c(t.maxWidthFront),0],"l",[0,c(t.minHeightFront-t.rivetHeightFront)]]).join(" ")}),t.selectAll(".measure-maxHeight-bg, .measure-maxHeight").attr("transform",function(t){return t.maxHeightFront<20?"translate(-10, "+c(t.maxHeightFront/2)+")":"translate(-38, "+c(t.maxHeightFront/2)+")"}),t.selectAll(".measure-maxWidth-bg, .measure-maxWidth").attr("transform",function(t){return t.maxHeightFront<20?"translate("+(c(t.maxWidthFront/2)+10)+", "+-20+")":"translate("+(c(t.maxWidthFront/2)+10)+", "+-48+")"}),d.select(".group-women").attr("transform","translate(40, 60)"),d.select(".group-men").attr("transform","translate("+(i-f-s)+", "+o+")"),p},data:function(t){return arguments.length?(n=t,e.datum(n),p.render(),p):n},toggle:function(t){var e=d.select(".group-women"),n=d.select(".group-men"),r=d.selectAll(".label"),a=d.selectAll(".g-measurements");0==t&&(e.transition().duration(500).attr("transform","translate(40, 60)"),e.selectAll(".outline").style("stroke-opacity",.1).transition().duration(500).delay(function(t,e){return 100*e}).attr("stroke-dashoffset",0),n.transition().duration(500).attr("transform","translate("+(i-f-s)+", "+o+")"),n.selectAll(".outline").style("stroke-opacity",.1).transition().duration(500).delay(function(t,e){return 100*e}).attr("stroke-dashoffset",0),e.selectAll(".outline-average").attr("stroke-dashoffset",function(t){return this.getTotalLength()}).attr("opacity",0).style("fill","none"),n.selectAll(".outline-average").attr("stroke-dashoffset",function(t){return this.getTotalLength()}).attr("opacity",0).style("fill","none"),r.attr("opacity",1),a.attr("opacity",0)),1==t&&(e.transition().duration(500).attr("transform","translate(40, 60)"),n.transition().duration(500).attr("transform","translate("+(i-f-s)+", "+o+")"),e.selectAll(".outline-average").raise().transition().duration(500).delay(function(t,e){return 100*e}).attr("stroke-dashoffset",0).attr("opacity",1).style("fill",l),n.selectAll(".outline-average").raise().transition().duration(500).delay(function(t,e){return 100*e}).attr("stroke-dashoffset",0).attr("opacity",1).style("fill",u),e.selectAll(".outline").style("stroke-opacity",.1).transition().duration(800).style("stroke-opacity",.05),n.selectAll(".outline").style("stroke-opacity",.1).transition().duration(800).style("stroke-opacity",.05),r.attr("opacity",1),a.attr("opacity",0)),2==t&&(e.transition().duration(500).attr("transform","translate("+(i-f)/2+", "+o+")"),n.transition().duration(500).attr("transform","translate("+(i-f)/2+", "+o+")"),e.selectAll(".outline").transition().duration(800).style("stroke-opacity",0),n.selectAll(".outline").transition().duration(800).style("stroke-opacity",0),e.selectAll(".outline-average").attr("opacity",1).style("fill",l),n.selectAll(".outline-average").attr("opacity",1).style("fill",u),r.transition().duration(800).attr("opacity",0),a.transition().duration(800).attr("opacity",1))}};return p.init(),p});return e.length>1?e:e.pop()}},function(t,e,n){t.exports=function(){"use strict";function t(t){for(var e=t.length,n=[],r=0;r<e;r+=1)n.push(t[r]);return n}function e(t){return t instanceof Element?t:"string"==typeof t?document.querySelector(t):null}function n(t){return"scrollama__debug-step--"+t.id+"-"+t.i}function r(t){return"scrollama__debug-offset--"+t.id}function a(t){var e=t.id,a=t.offsetVal,i=t.stepEl,o=i[0].getAttribute("class");i.forEach(function(t,r){return function(t){var e=n({id:t.id,i:t.i}),r=document.createElement("div");r.setAttribute("id",e+"_above"),r.setAttribute("class","scrollama__debug-step"),r.style.position="fixed",r.style.left="0",r.style.width="100%",r.style.backgroundImage="repeating-linear-gradient(45deg, green 0, green 2px, white 0, white 40px)",r.style.border="2px solid green",r.style.opacity="0.33",r.style.zIndex="9999",r.style.display="none",document.body.appendChild(r);var a=document.createElement("div");a.setAttribute("id",e+"_below"),a.setAttribute("class","scrollama__debug-step"),a.style.position="fixed",a.style.left="0",a.style.width="100%",a.style.backgroundImage="repeating-linear-gradient(135deg, orange 0, orange 2px, white 0, white 40px)",a.style.border="2px solid orange",a.style.opacity="0.33",a.style.zIndex="9999",a.style.display="none",document.body.appendChild(a)}({id:e,i:r})}),function(t){var e=t.id,n=t.offsetVal,a=t.stepClass,i=document.createElement("div");i.setAttribute("id",r({id:e})),i.setAttribute("class","scrollama__debug-offset"),i.style.position="fixed",i.style.left="0",i.style.width="100%",i.style.height="0px",i.style.borderTop="2px dashed black",i.style.zIndex="9999";var o=document.createElement("p");o.innerText='".'+a+'" trigger: '+n,o.style.fontSize="12px",o.style.fontFamily="monospace",o.style.color="black",o.style.margin="0",o.style.padding="6px",i.appendChild(o),document.body.appendChild(i)}({id:e,offsetVal:a,stepClass:o})}function i(t){var e=t.id,a=t.stepOffsetHeight,i=t.offsetMargin;t.offsetVal,a.forEach(function(t,r){return function(t){var e=t.h,r=t.offsetMargin,a=n({id:t.id,i:t.i}),i=document.querySelector("#"+a+"_above");i.style.height=e+"px",i.style.top=r-e+"px";var o=document.querySelector("#"+a+"_below");o.style.height=e+"px",o.style.top=r+"px"}({id:e,h:t,i:r,offsetMargin:i})}),function(t){var e=t.offsetMargin,n=r({id:t.id});document.querySelector("#"+n).style.top=e+"px"}({id:e,offsetMargin:i})}function o(t){var e=t.id,r=t.index,a=t.state,i=n({id:e,i:r}),o=document.querySelector("#"+i+"_above"),s=document.querySelector("#"+i+"_below"),l="enter"===a?"block":"none";o&&(o.style.display=l),s&&(s.style.display=l)}return function(){var n=1,r={},s={},l=null,u=null,c=null,d=null,h=0,m=0,g=0,f=0,p=null,v=null,x=null,b=!1,k=!1,y=!1,H=!1,W=0,F=!1,w=!1,A=null,B=null,_=-1,E=null,M=[];function j(t){var e=0;if(t.offsetParent)do{e+=t.offsetTop,t=t.offsetParent}while(t);return e<0?0:e}function O(t){return+t.getAttribute("data-scrollama-index")}function I(){window.pageYOffset>_?E="down":window.pageYOffset<_&&(E="up"),_=window.pageYOffset}function L(){g=window.innerHeight,f=function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}(),x=u?u.getBoundingClientRect():null,m=h*g,p=c?c.map(function(t){return t.offsetHeight}):[],v=c?c.map(j):[],k&&b&&G(),y&&i({id:d,stepOffsetHeight:p,offsetMargin:m,offsetVal:h})}function T(t){t&&!k?(b&&G(),k=!0):t||(s.top&&s.top.disconnect(),s.bottom&&s.bottom.disconnect(),s.stepAbove&&s.stepAbove.forEach(function(t){return t.disconnect()}),s.stepBelow&&s.stepBelow.forEach(function(t){return t.disconnect()}),s.stepProgress&&s.stepProgress.forEach(function(t){return t.disconnect()}),s.viewportAbove&&s.viewportAbove.forEach(function(t){return t.disconnect()}),s.viewportBelow&&s.viewportBelow.forEach(function(t){return t.disconnect()}),k=!1)}function R(t,e){if("above"===e)for(var n=0;n<t;n++){var r=A[n];"enter"===r.state&&z(c[n]),"up"===r.direction&&(P(c[n],"down"),z(c[n]))}else if("below"===e)for(var a=A.length-1;a>t;a--){var i=A[a];"enter"===i.state&&z(c[a]),"down"===i.direction&&(P(c[a],"up"),z(c[a]))}}function P(t,e){void 0===e&&(e=!0);var n=O(t),a={element:t,index:n,direction:E};A[n].direction=E,A[n].state="enter",F&&e&&"down"===E&&R(n,"above"),F&&e&&"up"===E&&R(n,"below"),r.stepEnter&&"function"==typeof r.stepEnter&&!M[n]&&(r.stepEnter(a,A),y&&o({id:d,index:n,state:"enter"}),w&&(M[n]=!0)),H&&C(t,"down"===E?0:1)}function z(t){var e=O(t),n={element:t,index:e,direction:E};A[e].direction=E,A[e].state="exit",H&&C(t,"down"===E?1:0),r.stepExit&&"function"==typeof r.stepExit&&(r.stepExit(n,A),y&&o({id:d,index:e,state:"exit"}))}function C(t,e){var n={element:t,index:O(t),progress:e};r.stepProgress&&"function"==typeof r.stepProgress&&r.stepProgress(n)}function S(){var t={direction:E};B.direction=E,B.state="enter",r.containerEnter&&"function"==typeof r.containerEnter&&r.containerEnter(t)}function q(){var t={direction:E};B.direction=E,B.state="exit",r.containerExit&&"function"==typeof r.containerExit&&r.containerExit(t)}function Q(t){I(),t.forEach(function(t){var e=t.isIntersecting,r=t.boundingClientRect,a=t.target,i=r.bottom,o=r.height,s=i-m,l=O(a),u=A[l];s>=-n&&(e&&"down"===E&&"enter"!==u.state?P(a,E):e||"up"!==E||"enter"!==u.state?!e&&s>=o&&"down"===E&&"enter"===u.state&&z(a):z(a))})}function N(t){I(),t.forEach(function(t){var e=t.isIntersecting,r=t.boundingClientRect,a=t.target,i=r.bottom,o=r.height,s=i-m,l=O(a),u=A[l];s>=-n&&s<o&&e&&"up"===E&&"enter"!==u.state?P(a,E):s<=n&&!e&&"down"===E&&"enter"===u.state&&z(a)})}function V(t){I(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,r=O(n),a=A[r];e&&"down"===E&&"enter"!==a.state&&"down"!==a.direction&&(P(n,"down"),z(n))})}function U(t){I(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,r=O(n),a=A[r];e&&"up"===E&&"enter"!==a.state&&"up"!==a.direction&&(P(n,"up"),z(n))})}function D(t){I(),t.forEach(function(t){var e=t.isIntersecting,r=t.intersectionRatio,a=t.boundingClientRect,i=t.target,o=a.bottom;e&&o-m>=-n&&C(i,+r.toFixed(3))})}function $(t){I();var e=t[0],r=e.isIntersecting,a=e.boundingClientRect;(a.top,a.bottom)>-n&&(r?S():"enter"===B.state&&q())}function Y(t){I();var e=t[0],r=e.isIntersecting;e.boundingClientRect.top<n&&(r?S():"enter"===B.state&&q())}function G(){s.viewportAbove&&s.viewportAbove.forEach(function(t){return t.disconnect()}),s.viewportAbove=c.map(function(t,e){var n=v[e],r=-(g-m+p[e]),a=new IntersectionObserver(V,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return a.observe(t),a}),s.viewportBelow&&s.viewportBelow.forEach(function(t){return t.disconnect()}),s.viewportBelow=c.map(function(t,e){var n=-(m+p[e]),r=f-v[e]-p[e]-m,a=new IntersectionObserver(U,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return a.observe(t),a}),s.stepAbove&&s.stepAbove.forEach(function(t){return t.disconnect()}),s.stepAbove=c.map(function(t,e){var n=p[e],r=new IntersectionObserver(Q,{root:null,rootMargin:n+"px 0px "+(-g+m)+"px 0px",threshold:0});return r.observe(t),r}),s.stepBelow&&s.stepBelow.forEach(function(t){return t.disconnect()}),s.stepBelow=c.map(function(t,e){var n=-m,r=f-g+p[e]+m,a=new IntersectionObserver(N,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return a.observe(t),a}),H&&(s.stepProgress&&s.stepProgress.forEach(function(t){return t.disconnect()}),s.stepProgress=c.map(function(t,e){var n=p[e]-m+"px 0px "+(-g+m)+"px 0px",r=function(t){for(var e=Math.ceil(t/W),n=[],r=1/e,a=0;a<e;a++)n.push(a*r);return n}(p[e]),a=new IntersectionObserver(D,{root:null,rootMargin:n,threshold:r});return a.observe(t),a})),l&&u&&(function(){s.top&&s.top.unobserve(l);var t={root:null,rootMargin:g+"px 0px -"+g+"px 0px",threshold:0};s.top=new IntersectionObserver($,t),s.top.observe(l)}(),function(){s.bottom&&s.bottom.unobserve(l);var t={root:null,rootMargin:"-"+x.height+"px 0px "+x.height+"px 0px",threshold:0};s.bottom=new IntersectionObserver(Y,t),s.bottom.observe(l)}())}var J={setup:function(n){var r=n.container,i=n.graphic,o=n.step,s=n.offset;void 0===s&&(s=.5);var m=n.progress;void 0===m&&(m=!1);var g=n.threshold;void 0===g&&(g=4);var f=n.debug;void 0===f&&(f=!1);var p=n.order;void 0===p&&(p=!0);var v=n.once;return void 0===v&&(v=!1),d=function(){var t="abcdefghijklmnopqrstuv",e=t.length,n=(new Date).getTime();return""+[0,0,0].map(function(n){return t[Math.floor(Math.random()*e)]}).join("")+n}(),c=function(e,n){return void 0===n&&(n=document),"string"==typeof e?t(n.querySelectorAll(e)):e instanceof NodeList?t(e):e instanceof Array?e:[]}(o),l=r?e(r):null,u=i?e(i):null,c.length?(y=f,H=m,F=p,w=v,J.offsetTrigger(s),W=Math.max(1,+g),b=!0,y&&a({id:d,stepEl:c,offsetVal:h}),c.forEach(function(t,e){return t.setAttribute("data-scrollama-index",e)}),A=c.map(function(){return{direction:null,state:null}}),B={direction:null,state:null},L(),T(!0),J):(console.error("scrollama error: no step elements"),J)},resize:function(){return L(),J},enable:function(){return T(!0),J},disable:function(){return T(!1),J},destroy:function(){T(!1),Object.keys(r).forEach(function(t){return r[t]=null}),Object.keys(s).forEach(function(t){return s[t]=null})},offsetTrigger:function(t){return t&&(isNaN(t),1)?(h=Math.min(Math.max(0,t),1),J):h},onStepEnter:function(t){return r.stepEnter=t,J},onStepExit:function(t){return r.stepExit=t,J},onStepProgress:function(t){return r.stepProgress=t,J},onContainerEnter:function(t){return r.containerEnter=t,J},onContainerExit:function(t){return r.containerExit=t,J}};return J}}()},function(t,e){!function(t,e){"use strict";if("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)"isIntersecting"in t.IntersectionObserverEntry.prototype||Object.defineProperty(t.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var n=[];a.prototype.THROTTLE_TIMEOUT=100,a.prototype.POLL_INTERVAL=null,a.prototype.USE_MUTATION_OBSERVER=!0,a.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},a.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},a.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},a.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},a.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},a.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},a.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(t,"resize",this._checkForIntersections,!0),i(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},a.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(t,"resize",this._checkForIntersections,!0),o(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},a.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),n=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(a){var i=a.element,o=l(i),s=this._rootContainsTarget(i),u=a.entry,c=e&&s&&this._computeTargetAndRootIntersection(i,n),d=a.entry=new r({time:t.performance&&performance.now&&performance.now(),target:i,boundingClientRect:o,rootBounds:n,intersectionRect:c});u?e&&s?this._hasCrossedThreshold(u,d)&&this._queuedEntries.push(d):u&&u.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},a.prototype._computeTargetAndRootIntersection=function(n,r){if("none"!=t.getComputedStyle(n).display){for(var a=l(n),i=c(n),o=!1;!o;){var u=null,d=1==i.nodeType?t.getComputedStyle(i):{};if("none"==d.display)return;if(i==this.root||i==e?(o=!0,u=r):i!=e.body&&i!=e.documentElement&&"visible"!=d.overflow&&(u=l(i)),u&&!(a=s(u,a)))break;i=c(i)}return a}},a.prototype._getRootRect=function(){var t;if(this.root)t=l(this.root);else{var n=e.documentElement,r=e.body;t={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},a.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},a.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,r=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==r)for(var a=0;a<this.thresholds.length;a++){var i=this.thresholds[a];if(i==n||i==r||i<n!=i<r)return!0}},a.prototype._rootIsInDom=function(){return!this.root||u(e,this.root)},a.prototype._rootContainsTarget=function(t){return u(this.root||e,t)},a.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},a.prototype._unregisterInstance=function(){var t=n.indexOf(this);-1!=t&&n.splice(t,1)},t.IntersectionObserver=a,t.IntersectionObserverEntry=r}function r(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,r=this.intersectionRect,a=r.width*r.height;this.intersectionRatio=n?a/n:this.isIntersecting?1:0}function a(t,e){var n=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function i(t,e,n,r){"function"==typeof t.addEventListener?t.addEventListener(e,n,r||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function o(t,e,n,r){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,r||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function s(t,e){var n=Math.max(t.top,e.top),r=Math.min(t.bottom,e.bottom),a=Math.max(t.left,e.left),i=Math.min(t.right,e.right),o=i-a,s=r-n;return o>=0&&s>=0&&{top:n,bottom:r,left:a,right:i,width:o,height:s}}function l(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(t,e){for(var n=e;n;){if(n==t)return!0;n=c(n)}return!1}function c(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}}(window,document)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(12);var r=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),a=null,i=[],o=d3.selectAll(".debunk-graphic"),s=d3.selectAll(".debunk-ui"),l=s.selectAll(".btn");function u(){i.forEach(function(t){t.resize()})}function c(){var t=d3.select(this),e=t.classed("is-active"),n=!e;console.log({selStatus:e,inverse:n});var r=t.at("data-location");s.selectAll("[data-location="+r+"]").classed("is-active",!1),t.classed("is-active",!e);var a=t.text().toLowerCase();i.forEach(function(t){t.highlight(a,r,e)})}function d(){var t=d3.select(this),e=(d3.nest().key(function(t){return t.group}).entries(a),t.at("data-location")),n=d3.nest().key(function(t){return t.group}).rollup(function(t,e){var n={brand:"average",maxHeightFront:d3.round(d3.mean(t,function(t){return t.maxHeightFront}),1),minHeightFront:d3.round(d3.mean(t,function(t){return t.minHeightFront}),1),rivetHeightFront:d3.round(d3.mean(t,function(t){return t.rivetHeightFront}),1),maxWidthFront:d3.round(d3.mean(t,function(t){return t.maxWidthFront}),1),minWidthFront:d3.round(d3.mean(t,function(t){return t.minWidthFront}),1),maxHeightBack:d3.round(d3.mean(t,function(t){return t.maxHeightBack}),1),minHeightBack:d3.round(d3.mean(t,function(t){return t.minHeightBack}),1),maxWidthBack:d3.round(d3.mean(t,function(t){return t.maxWidthBack}),1),minWidthBack:d3.round(d3.mean(t,function(t){return t.minWidthBack}),1)};return t.push(n),t}).entries(a),r=t.selectAll(".chart").data(n).enter().append("div.chart").attr("data-location",e).debunkingChart();i=i.concat(r).filter(function(t){return t}),u(),l.on("click",c)}e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){a=t[0],o.each(d)}).catch(function(t){return console.log(t)})},resize:u}},function(t,e,n){"use strict";d3.selection.prototype.debunkingChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r=e.at("data-location"),a=0,i=0,o=d3.scaleLinear(),s=null,l=(d3.selectAll(".outline"),n.value),u=[l].map(function(t){var e=t.map(function(t){return t.pocketArea});return d3.extent(e)}),c=[l].map(function(t){var e=t.map(function(t){return t.maxHeightBack*t.minWidthBack});return d3.extent(e)}),d={init:function(){e.append("text").text(function(t){return(""+t.key).split(" ")[0]+"'s "+(""+t.key).split(" ")[2]}).attr("class","chart-label"),e.append("text").attr("class","tk-atlas selected-brand");var t=e.append("div.container");(s=t.append("svg.debunk")).append("g").append("g.g-vis"),d.resize(),d.render()},resize:function(){var t=window.innerWidth,n=null;return t>=900?n=225:t<900&&(n=Math.max(t/4,150)),e.st("width",n).st("height",1.5*n),a=e.node().offsetWidth-25-0,i=1.25*a-5-5,s.at({width:a+25+0,height:i+5+5}),o.domain([0,29]).range([0,i]),e.selectAll(".outline").size()>0&&d.update(),d},render:function(){if("front"==r){var t=s.select(".g-vis");t.selectAll(".outline").data(function(t){return t.value}).enter().append("path").attr("class",function(t){return"average"==t.brand?"outline outline-average":t.pocketArea==u[0][1]?"outline outline-biggest":t.pocketArea==u[0][0]?"outline outline-smallest":"outline"}),t.selectAll(".measure-maxHeight").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.pocketArea==u[0][1]||t.pocketArea==u[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","end").attr("class",function(t){return"average"==t.brand?"tk-atlas measure-bg measure-maxHeight-average":t.pocketArea==u[0][1]?"tk-atlas measure-bg measure-maxHeight-biggest":t.pocketArea==u[0][0]?"tk-atlas measure-bg measure-maxHeight-smallest":"mystery-text"}),t.selectAll(".measure-minHeight").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.pocketArea==u[0][1]||t.pocketArea==u[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.minHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","start").attr("class","tk-atlas measure-bg measure-minHeight-bg").attr("class",function(t){return"average"==t.brand?"tk-atlas measure-bg measure-minHeight-average":t.pocketArea==u[0][1]?"tk-atlas measure-bg measure-minHeight-biggest":t.pocketArea==u[0][0]?"tk-atlas measure-bg measure-minHeight-smallest":"mystery-text"}),t.selectAll(".measure-maxWidth").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.pocketArea==u[0][1]||t.pocketArea==u[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class",function(t){return"average"==t.brand?"tk-atlas measure-bg measure-maxWidth-average":t.pocketArea==u[0][1]?"tk-atlas measure-bg measure-maxWidth-biggest":t.pocketArea==u[0][0]?"tk-atlas measure-bg measure-maxWidth-smallest":void 0}),t.selectAll(".measure-minWidth").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.pocketArea==u[0][1]||t.pocketArea==u[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.minWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class",function(t){return"average"==t.brand?"tk-atlas measure-bg measure-minWidth-average":t.pocketArea==u[0][1]?"tk-atlas measure-bg measure-minWidth-biggest":t.pocketArea==u[0][0]?"tk-atlas measure-bg measure-minWidth-smallest":void 0}),t.selectAll(".measure-maxHeight").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.pocketArea==u[0][1]||t.pocketArea==u[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","end").attr("class",function(t){return"average"==t.brand?"tk-atlas measure measure-maxHeight-average":t.pocketArea==u[0][1]?"tk-atlas measure measure-maxHeight-biggest":t.pocketArea==u[0][0]?"tk-atlas measure measure-maxHeight-smallest":void 0}),t.selectAll(".measure-minHeight").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.pocketArea==u[0][1]||t.pocketArea==u[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.minHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","start").attr("class",function(t){return"average"==t.brand?"tk-atlas measure measure-minHeight-average":t.pocketArea==u[0][1]?"tk-atlas measure measure-minHeight-biggest":t.pocketArea==u[0][0]?"tk-atlas measure measure-minHeight-smallest":void 0}),t.selectAll(".measure-maxWidth").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.pocketArea==u[0][1]||t.pocketArea==u[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class",function(t){return"average"==t.brand?"tk-atlas measure measure-maxWidth-average":t.pocketArea==u[0][1]?"tk-atlas measure measure-maxWidth-biggest":t.pocketArea==u[0][0]?"tk-atlas measure measure-maxWidth-smallest":void 0}),t.selectAll(".measure-minWidth").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.pocketArea==u[0][1]||t.pocketArea==u[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.minWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class",function(t){return"average"==t.brand?"tk-atlas measure measure-minWidth-average":t.pocketArea==u[0][1]?"tk-atlas measure measure-minWidth-biggest":t.pocketArea==u[0][0]?"tk-atlas measure measure-minWidth-smallest":void 0})}else if("back"==r){var e=s.select(".g-vis");e.selectAll(".outline").data(function(t){return t.value}).enter().append("path").attr("class",function(t){return"average"==t.brand?"outline outline-average":t.maxHeightBack*t.minWidthBack==c[0][1]?"outline outline-biggest":t.maxHeightBack*t.minWidthBack==c[0][0]?"outline outline-smallest":"outline"}),e.selectAll(".measure-maxHeight").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.maxHeightBack*t.minWidthBack==c[0][1]||t.maxHeightBack*t.minWidthBack==c[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightBack,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class",function(t){return"average"==t.brand?"tk-atlas measure-bg measure-maxHeight-average":t.maxHeightBack*t.minWidthBack==c[0][1]?"tk-atlas measure-bg measure-maxHeight-biggest":t.maxHeightBack*t.minWidthBack==c[0][0]?"tk-atlas measure-bg measure-maxHeight-smallest":void 0}),e.selectAll(".measure-minHeight").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.maxHeightBack*t.minWidthBack==c[0][1]||t.maxHeightBack*t.minWidthBack==c[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.minHeightBack,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","start").attr("class",function(t){return"average"==t.brand?"tk-atlas measure-bg measure-minHeight-average":t.maxHeightBack*t.minWidthBack==c[0][1]?"tk-atlas measure-bg measure-minHeight-biggest":t.maxHeightBack*t.minWidthBack==c[0][0]?"tk-atlas measure-bg measure-minHeight-smallest":void 0}),e.selectAll(".measure-maxWidth").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.maxHeightBack*t.minWidthBack==c[0][1]||t.maxHeightBack*t.minWidthBack==c[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthBack,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class",function(t){return"average"==t.brand?"tk-atlas measure-bg measure-minHeight-average":t.maxHeightBack*t.minWidthBack==c[0][1]?"tk-atlas measure-bg measure-maxWidth-biggest":t.maxHeightBack*t.minWidthBack==c[0][0]?"tk-atlas measure-bg measure-maxWidth-smallest":void 0}),e.selectAll(".measure-maxHeight").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.maxHeightBack*t.minWidthBack==c[0][1]||t.maxHeightBack*t.minWidthBack==c[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightBack,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class",function(t){return"average"==t.brand?"tk-atlas measure measure-maxHeight-average":t.maxHeightBack*t.minWidthBack==c[0][1]?"tk-atlas measure measure-maxHeight-biggest":t.maxHeightBack*t.minWidthBack==c[0][0]?"tk-atlas measure measure-maxHeight-smallest":void 0}),e.selectAll(".measure-minHeight").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.maxHeightBack*t.minWidthBack==c[0][1]||t.maxHeightBack*t.minWidthBack==c[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.minHeightBack,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","start").attr("class",function(t){return"average"==t.brand?"tk-atlas measure measure-minHeight-average":t.maxHeightBack*t.minWidthBack==c[0][1]?"tk-atlas measure measure-minHeight-biggest":t.maxHeightBack*t.minWidthBack==c[0][0]?"tk-atlas measure measure-minHeight-smallest":void 0}),e.selectAll(".measure-maxWidth").data(function(t){return t.value.filter(function(t){return"average"==t.brand||t.maxHeightBack*t.minWidthBack==c[0][1]||t.maxHeightBack*t.minWidthBack==c[0][0]})}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthBack,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class",function(t){return"average"==t.brand?"tk-atlas measure measure-maxWidth-average":t.maxHeightBack*t.minWidthBack==c[0][1]?"tk-atlas measure measure-maxWidth-biggest":t.maxHeightBack*t.minWidthBack==c[0][0]?"tk-atlas measure measure-maxWidth-smallest":void 0})}return d.update(),d},update:function(){var t=s.selectAll(".outline");if("front"==r){t.attr("d",function(t){var e=[10,10],n=[10,10+o(t.maxHeightFront)],r=[10+o(t.maxWidthFront/2),o(t.maxHeightFront+2)+10],a=[10+o(.8*t.maxWidthFront),o(.8*t.maxHeightFront)+10],i=[10+o(t.maxWidthFront),o(t.minHeightFront)+10],s=[10+o(t.maxWidthFront),o(t.minHeightFront)+10],l=[10+o(t.maxWidthFront-3),o(t.maxHeightFront)+10],u=[10+o(t.maxWidthFront),o(t.rivetHeightFront)+10],c=[10+o(t.maxWidthFront),o(t.rivetHeightFront)+10],d=[10+o(1.5*(t.maxWidthFront-t.minWidthFront)),o(t.rivetHeightFront)+10],h=[10+o(t.maxWidthFront-t.minWidthFront),10];return("TRUE"==t.cutout?["M",e,"L",n,"L",l,"Q",a,s,"L",u,"Q",d,h,"L",e]:["M",e,"L",n,"Q",r,i,"L",c,"Q",d,h,"L",e]).join(" ")});var e=s.selectAll(".g-vis");e.selectAll(".measure-maxHeight-average, .measure-maxHeight-smallest, .measure-maxHeight-biggest").attr("transform",function(t){return"translate(5, "+o(t.maxHeightFront/2)+")"}),e.selectAll(".measure-minHeight-average, .measure-minHeight-smallest, .measure-minHeight-biggest").attr("transform",function(t){return"translate("+(o(t.maxWidthFront)+15)+", "+o(t.rivetHeightFront+(t.minHeightFront-t.rivetHeightFront)/2)+")"}),e.selectAll(".measure-maxWidth-average, .measure-maxWidth-smallest, .measure-maxWidth-biggest").attr("transform",function(t){return"translate("+(o(t.maxWidthFront/2)+10)+", "+(o(t.maxHeightFront)+25)+")"}),e.selectAll(".measure-minWidth-average, .measure-minWidth-smallest, .measure-minWidth-biggest").attr("transform",function(t){return"translate("+(o(t.maxWidthFront-t.minWidthFront+t.minWidthFront/2)+10)+", "+o(t.rivetHeightFront/2)+")"}),e.node().getBBox().width,e.attr("transform",function(t){var n=this.getBBox().width,r=e.selectAll(".measure-maxHeight-biggest").node().getBBox().width;return"translate("+((a-n)/2+r/2+25)+", 0)"})}else if("back"==r){t.attr("d",function(t){return["M",[10,10],"l",[o((t.maxWidthBack-t.minWidthBack)/2),o(t.minHeightBack)],"l",[o(t.minWidthBack/2),o(t.maxHeightBack-t.minHeightBack)],"l",[o(t.minWidthBack/2),-o(t.maxHeightBack-t.minHeightBack)],"l",[o((t.maxWidthBack-t.minWidthBack)/2),-o(t.minHeightBack)],"l",[-o(t.maxWidthBack),0]].join(" ")});var n=s.selectAll(".g-vis");n.selectAll(".measure-maxHeight-average, .measure-maxHeight-smallest, .measure-maxHeight-biggest").attr("transform",function(t){return"translate("+(o(t.maxWidthBack/2)+10)+", "+o(t.maxHeightBack/2)+")"}),n.selectAll(".measure-minHeight-average, .measure-minHeight-smallest, .measure-minHeight-biggest").attr("transform",function(t){return"translate("+(o(t.maxWidthBack)+15)+", "+o(t.minHeightBack/2)+")"}),n.selectAll(".measure-maxWidth-average, .measure-maxWidth-smallest, .measure-maxWidth-biggest").attr("transform",function(t){return"translate("+(o(t.maxWidthBack/2)+10)+", "+(o(t.maxHeightBack)+25)+")"})}return d},highlight:function(t,n,a){if(n==r){s.selectAll(".outline").classed("is-active",!1);var i=s.select(".outline-"+t),o=(s.selectAll(".measure, .measure-bg").classed("is-active",!1),s.selectAll(".measure-maxHeight-"+t+", .measure-minHeight-"+t+", .measure-maxWidth-"+t+", .measure-minWidth-"+t)),l=e.selectAll(".selected-brand").classed("is-active",!1);0==a&&(i.classed("is-active",!0),o.classed("is-active",!0),l.classed("is-active",!1),"biggest"==t?l.text(function(t){return t.value.filter(function(t){return t.pocketArea==u[0][1]})[0].brand}).classed("is-active",!0):"smallest"==t&&l.text(function(t){return t.value.filter(function(t){return t.pocketArea==u[0][0]})[0].brand}).classed("is-active",!0))}return d},data:function(t){return arguments.length?(n=t,e.datum(n),d.render(),d):n}};return d.init(),d});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(14),n(15);var r=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),a=null,i=null,o=null,s=null,l=null,u=null,c=null,d="All brands",h="All styles",m="All prices",g=d3.select(".fit"),f=g.select("figure"),p=g.selectAll(".fit-container"),v=p.selectAll(".fit-table"),x=p.select(".ui-brand"),b=p.select(".ui-style"),k=p.select(".ui-price"),y=d3.select("nav"),H=y.select("nav ul"),W=H.selectAll("li"),F=g.select(".btn"),w=g.selectAll(".drag-animation"),A=null,B=null,_=[],E=[],M=0,j=W.size(),O=W.node().offsetWidth,I=j*O-O,L=0;function T(){W.classed("is-active",!1),_.forEach(function(t){t.resize()}),E.forEach(function(t){t.resize()})}function R(t,e,n){t.selectAll("option").data(function(t){var r=d3.nest().key(function(t){return t[e]}).entries(i).map(function(t){return t.key});return r.unshift("All "+n),r}).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}),t.on("change",P)}function P(){var t=d3.select(this).at("data-dropdown"),e=this.value;"price"==t&&(m=e),"brand"==t&&(d=e),"style"==t&&(h=e),s(d,m,h),l(d,m,h)}function z(){var t=g.select(".click-sentence"),e=g.select(".stat-sentence");t.classed("is-visible")&&(t.classed("is-visible",!1),e.classed("is-visible",!0)),W.classed("is-active",!1);var n=d3.select(this);n.classed("is-active",!0);var r=n.at("data-type");o=r;var a=n.at("data-id");u(o,a),c(o,a),A(o,a),B(o,a)}function C(t){return[t,"webkit-"+t,"ms-"+t]}function S(){var t=d3.event.x,e=M-t;M=t;var n=+H.at("data-x"),r=Math.max(0,Math.min(n+e,I)),a=Math.min(Math.max(0,Math.floor(r/I*j)),j-1),i=-1*(r-L);W.classed("is-current",function(t,e){return e===a}),H.at("data-x",r),C("transform").forEach(function(t){var e="translateX("+i+"px)";H.node().style[t]=e})}function q(){var t=d3.event.x;M=t,H.classed("is-dragend",!1),y.classed("is-drag",!0)}function Q(){var t=+H.at("data-x"),e=Math.min(Math.max(0,Math.floor(t/I*j)),j-1)*O,n=-1*(e-L);H.at("data-x",e),C("transform").forEach(function(t){var e="translateX("+n+"px)";H.node().style[t]=e}),H.classed("is-dragend",!0),y.classed("is-drag",!1)}e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){a=t[0],function(){d3.nest().key(function(t){return t.menWomen}).entries(a);var t=d3.nest().key(function(t){return t.menWomen}).rollup(function(t,e){return{brand:"average",maxHeightFront:d3.round(d3.mean(t,function(t){return t.maxHeightFront}),1),minHeightFront:d3.round(d3.mean(t,function(t){return t.minHeightFront}),1),rivetHeightFront:d3.round(d3.mean(t,function(t){return t.rivetHeightFront}),1),maxWidthFront:d3.round(d3.mean(t,function(t){return t.maxWidthFront}),1),minWidthFront:d3.round(d3.mean(t,function(t){return t.minWidthFront}),1),maxHeightBack:d3.round(d3.mean(t,function(t){return t.maxHeightBack}),1),minHeightBack:d3.round(d3.mean(t,function(t){return t.minHeightBack}),1),maxWidthBack:d3.round(d3.mean(t,function(t){return t.maxWidthBack}),1),minWidthBack:d3.round(d3.mean(t,function(t){return t.minWidthBack}),1)}}).entries(a),e=(d3.select(this),w.selectAll(".chart").data(t).enter().append("div.chart").animateChart());_=_.concat(e).filter(function(t){return t}),A=e[1].animate,B=e[0].animate}(),function(){var t=v;i=a.sort(function(t,e){return d3.ascending(t.brand,e.brand)});var e=d3.nest().key(function(t){return t.menWomen}).entries(i),n=t.selectAll(".chart").data(e).enter().append("div.chart").fitChart();E=E.concat(n).filter(function(t){return t}),s=n[0].toggle,l=n[1].toggle,u=n[0].dim,c=n[1].dim,R(x,"brand","brands"),R(b,"updatedStyle","styles"),R(k,"priceGroup","prices"),d3.select(".drag").selectAll(".click-item").on("click",z)}(),d3.drag(),H.call(d3.drag().on("drag",S).on("start",q).on("end",Q)),W.on("click",z),F.on("click",function(){var t=f.classed("is-truncated"),e=t?"Show Fewer":"Show All";if(F.text(e),f.classed("is-truncated",!t),!t){var n=+F.at("data-y");window.scrollTo(0,n)}F.at("data-y",window.scrollY),f.select(".show-more").classed("is-visible",!t)}),T()}).catch(function(t){return console.log(t)})},resize:T}},function(t,e,n){"use strict";d3.selection.prototype.fitChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r=0,a=0,i=d3.scaleLinear();function o(t,e){return e*t/225}function s(t,e){return e*t/175}var l=null,u=null,c=null;function d(t){d3.select(this).append("path.outline")}var h=d3.map([{object:"phone",id:"iphone",width:7,height:14},{object:"wallet",id:"frontWallet",width:8.4,height:10.4},{object:"pen",id:"pen",width:1.5,height:14.5},{object:"hand",width:7.4,height:17.2},{object:"phone",id:"galaxy",width:6.9,height:14.7},{object:"phone",id:"pixel",width:7.6,height:15.7},{object:"hand",id:"menHand",width:7.7,height:13.4,fingerHeight:18.9,fingerWidth:9.8},{object:"hand",id:"womenHand",width:7,height:12,fingerHeight:17.2,fingerWidth:8.9}],function(t){return t.id}),m={init:function(){e.append("text.tk-atlas.text-menWomen").text(function(t){return t.key+"'s"});var t=e.append("div.container");c=t.selectAll(".fit-brand").data(function(t){return t.values}).enter().append("div.area-front").attr("class",function(t){return"fit-brand visible "+t.menWomen}),u=c.append("div.display");var n=c.append("div.tooltip");l=u.append("svg.fit-canvas");var r=u.append("div.text"),a=r.append("div.leftText"),i=r.append("div.rightText");a.append("text.style.tk-atlas").text(function(t){return t.updatedStyle}),a.append("text.brand.tk-atlas").text(function(t){return t.brand}),i.append("text.tag.tk-atlas").text(function(t){return t.menWomen.substring(0,1)});var o=n.append("div.tooltip-text"),s=d3.format("$.2f");o.append("text.tt-name.tk-atlas").text(function(t){return t.name}),o.append("text.tt-price.tk-atlas").text(function(t){return""+s(t.price)}),o.append("text.tt-fabric.tk-atlas").text(function(t){return t.fabric}),l.append("g").append("g.g-vis"),m.resize(),m.render()},resize:function(){var t=window.innerWidth,n=null;t>=900?n=225:t<900&&(n=Math.max(t/4,150));var o=e.selectAll(".fit-brand").st("width",n).st("height",d3.round(1.33*n,0));return o.selectAll(".display, .tooltip").st("width",n).st("height",d3.round(1.33*n,0)),r=o.node().offsetWidth-0-0,a=r-50-0,l.at({width:r+0+0,height:a+50+0}),i.domain([0,29]).range([0,a]),e.selectAll(".outline").size()>0&&m.update(),m},render:function(){var t=l.select(".g-vis");return t.selectAll(".outline").data(function(t){return[t]}).enter().append("g").each(d),t.selectAll(".measure measure-maxHeight").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","end").attr("class","tk-atlas measure measure-maxHeight"),t.selectAll(".measure measure-minHeight").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.minHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","start").attr("class","tk-atlas measure measure-minHeight"),t.selectAll(".measure measure-maxWidth").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class","tk-atlas measure measure-maxWidth"),t.selectAll(".measure measure-minWidth").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.minWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("class","tk-atlas measure measure-minWidth"),m.update(),m},update:function(){l.selectAll(".outline").attr("d",function(t){return d3.select(this),function(t,e){var n=e,r=[10,10],a=[10,10+i(n.maxHeightFront)],o=[10+i(n.maxWidthFront/2),i(n.maxHeightFront+2)+10],s=[10+i(.8*n.maxWidthFront),i(.8*n.maxHeightFront)+10],l=[10+i(n.maxWidthFront),i(n.minHeightFront)+10],u=[10+i(n.maxWidthFront),i(n.minHeightFront)+10],c=[10+i(n.maxWidthFront-3),i(n.maxHeightFront)+10],d=[10+i(n.maxWidthFront),i(n.rivetHeightFront)+10],h=[10+i(n.maxWidthFront),i(n.rivetHeightFront)+10],m=[10+i(1.5*(n.maxWidthFront-n.minWidthFront)),i(n.rivetHeightFront)+10],g=[10+i(n.maxWidthFront-n.minWidthFront),10];return("TRUE"==n.cutout?["M",r,"L",a,"L",c,"Q",s,u,"L",d,"Q",m,g,"L",r]:["M",r,"L",a,"Q",o,l,"L",h,"Q",m,g,"L",r]).join(" ")}(0,t)});var t=l.selectAll(".g-vis");return t.selectAll(".measure-maxHeight").attr("transform",function(t){return"translate(5, "+i(t.maxHeightFront/2)+")"}),t.selectAll(".measure-minHeight").attr("transform",function(t){return"translate("+(i(t.maxWidthFront)+15)+", "+i(t.rivetHeightFront+(t.minHeightFront-t.rivetHeightFront)/2)+")"}),t.selectAll(".measure-maxWidth").attr("transform",function(t){return"translate("+(i(t.maxWidthFront/2)+10)+", "+(i(t.maxHeightFront)+25)+")"}),t.selectAll(".measure-minWidth").attr("transform",function(t){return"translate("+(i(t.maxWidthFront-t.minWidthFront+t.minWidthFront/2)+10)+", "+i(t.rivetHeightFront/2)+")"}),t.node().getBBox().width,t.attr("transform",function(e){var n=this.getBBox().width,a=t.selectAll(".measure-maxHeight").node().getBBox().width;return"translate("+((r-n)/2+a/2)+", 0)"}),l.selectAll(".pocket-object").remove(),m},data:function(t){return arguments.length?(n=t,e.datum(n),m.render(),m):n},toggle:function(t,e,n){return c.classed("visible",function(r){return!(r.brand!=t&&"All"!=t||r.style!=n&&"All"!=n||r.priceGroup!=e&&"All"!=e)}),m},dim:function(t,u){c.select(".display").classed("dimmed",function(e){var n=null;"phone"==t&&(n="rectanglePhone"),"pen"==t&&(n="rectanglePen"),"wallet"==t&&(n="rectangleWallet"),"hand"==t&&(n="rectangleHand");var l=i(h.get(u).width),c=i(h.get(u).height),d=e[n],m=o(d.width,r),g=(i(e.minWidthFront),s(d.height,a));return(l>i(e.minWidthFront)||l>m||c>g)&&(e.minWidthFront,!0)});var d=e.selectAll(".dimmed").size(),g=e.selectAll(".display").size();"women"==n.key?d3.select(".stat-women").text(d3.round(100-d/g*100,0)+"%"):"men"==n.key&&d3.select(".stat-men").text(d3.round(100-d/g*100,0)+"%");var f=l.select(".g-vis");return f.selectAll(".pocket-object").remove(),f.selectAll(".outline-object").data(function(t){return[t]}).enter().append("g").each(function(e){var n=d3.select(this);!function(t,e,n,l){var u=null;"phone"==e&&(u="rectanglePhone"),"pen"==e&&(u="rectanglePen"),"wallet"==e&&(u="rectangleWallet"),"hand"==e&&(u="rectangleHand");var c=n,d=i(h.get(l).width),m=i(h.get(l).height),g=o(t[u].points[0][0],r),f=s(t[u].points[0][1],a);"hand"!=e?c.append("svg:image").attr("width",d).attr("height",m).attr("xlink:href","assets/images/"+l+".png").attr("transform-origin","top left").attr("transform","translate("+g+", "+f+")rotate("+t[u].angle+")").attr("class","pocket-object"):c.append("svg:image").attr("width",i(h.get(l).fingerWidth)).attr("height",i(h.get(l).fingerHeight)).attr("xlink:href","assets/images/"+l+".png").attr("transform-origin","top left").attr("transform","translate("+(g+(i(h.get(l).fingerWidth)-d)/2)+", "+f+")rotate("+t[u].angle+")").attr("class","pocket-object")}(e,t,n,u)}),m}};return m.init(),m});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};d3.selection.prototype.animateChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),a=0,i=0,o=d3.scaleLinear(),s=null,l=null;function u(t,e){var n=e,a=[10,10],i=[10,10+o(n.value.maxHeightFront)],s=[10+o(n.value.maxWidthFront/2),o(n.value.maxHeightFront+2)+10],u=[10+o(.8*n.value.maxWidthFront),o(.8*n.value.maxHeightFront)+10],c=[10+o(n.value.maxWidthFront),o(n.value.minHeightFront)+10],h=[10+o(n.maxWidthFront),o(n.value.minHeightFront)+10],m=[10+o(n.value.maxWidthFront-3),o(n.value.maxHeightFront)+10],g=[10+o(n.value.maxWidthFront),o(n.value.rivetHeightFront)+10],f=[10+o(n.value.maxWidthFront),o(n.value.rivetHeightFront)+10],p=[10+o(n.value.minWidthFront/2),o(.4*n.value.maxWidthFront)+10],v=[10+o(n.value.maxWidthFront-n.value.minWidthFront),10],x=null,b=null;if("TRUE"==n.cutout){x=["M",a,"L",i,"L",m,"Q",u,h,"L",g,"Q",p,v,"L",a].join(" ");var k=d(m,u,h),y=d(g,p,v),H=d3.range(10).map(function(t,e,n){return k(t/(n.length-1))}),W=d3.range(10).map(function(t,e,n){return y(t/(n.length-1))});b=[a,i].concat(H).concat(W).concat([a])}else{x=["M",a,"L",i,"Q",s,c,"L",f,"Q",p,v,"L",a].join(" ");var F=d(i,s,c),w=d(f,p,v),A=d3.range(10).map(function(t,e,n){return F(t/(n.length-1))}),B=d3.range(10).map(function(t,e,n){return w(t/(n.length-1))});b=[a].concat(A).concat(B).concat([a])}var _=d3.range(125,160,5),E=d3plus.largestRect(b,{nTries:100,aspectRatio:.5,cache:!1}),M=d3plus.largestRect(b,{nTries:100,aspectRatio:.1,cache:!1}),j=d3plus.largestRect(b,{nTries:100,aspectRatio:.8,cache:!1}),O=d3plus.largestRect(b,{nTries:100,aspectRatio:.57,cache:!1,angle:_}),I=[n].map(function(t){return r({},t,{rectanglePhone:E,rectanglePen:M,rectangleWallet:j,rectangleHand:O})});return l=I[0],x}function c(t){var e=d3.select(this),n=u(0,t);e.append("path.outline").attr("class",function(t){return"outline outline-"+t.key}).attr("d",n),s.append("text").text(function(t){return t.key}).attr("class","avglabel tk-atlas").attr("x",0).attr("y",15)}function d(t,e,n){return function(r){return[Math.pow(1-r,2)*t[0]+2*(1-r)*r*e[0]+Math.pow(r,2)*n[0],Math.pow(1-r,2)*t[1]+2*(1-r)*r*e[1]+Math.pow(r,2)*n[1]]}}var h=d3.map([{object:"phone",id:"iphone",width:7,height:14},{object:"wallet",id:"frontWallet",width:8.4,height:10.4},{object:"pen",id:"pen",width:1.5,height:14.5},{object:"hand",width:7.4,height:17.2},{object:"phone",id:"galaxy",width:6.9,height:14.7},{object:"phone",id:"pixel",width:7.6,height:15.7},{object:"hand",id:"menHand",width:7.7,height:13.4,fingerHeight:18.9,fingerWidth:9.8},{object:"hand",id:"womenHand",width:7,height:12,fingerHeight:17.2,fingerWidth:8.9}],function(t){return t.id}),m={init:function(){(s=e.append("svg")).attr("class",function(t){return"animate-chart animate-chart-"+t.key});var t=s.append("g");t.at("transform","translate(0, 15)"),s.append("g.g-axis"),t.append("g.g-vis"),m.resize(),m.render()},resize:function(){var t=window.innerWidth,n=null;return t>=900?n=200:t<900&&(n=Math.max(t/4,150)),e.st("width",n).st("height",1.25*n),a=e.node().offsetWidth-0-0,i=1.25*a-15-0,s.at({width:a+0+0,height:i+15+0}),o.domain([0,29]).range([0,i]),e.selectAll(".outline").size()>0&&m.update(),m},render:function(){return s.select(".g-vis").selectAll(".outline").data(function(t){return[t]}).enter().append("g").each(c),m},data:function(t){return arguments.length?(n=t,e.datum(n),m.render(),m):n},animate:function(t,e){var n=s.select(".g-vis");return n.selectAll(".pocket-object").remove(),n.selectAll(".outline-object").data(function(t){return[t]}).enter().append("g").each(function(n){var r=d3.select(this);!function(t,e,n,r){var s=null;"phone"==e&&(s="rectanglePhone"),"pen"==e&&(s="rectanglePen"),"wallet"==e&&(s="rectangleWallet"),"hand"==e&&(s="rectangleHand");var u=n,c=o(h.get(r).width),d=o(h.get(r).height);"hand"!=e?(u.append("svg:image").attr("width",c).attr("height",d).attr("xlink:href","assets/images/"+r+".png"),u.attr("transform","translate("+.75*a+", "+-i+")").transition().duration(500).attr("transform-origin","top left").attr("transform","translate("+l[s].points[0][0]+", "+l[s].points[0][1]+")rotate("+l[s].angle+")").attr("class","pocket-object")):(u.append("svg:image").attr("width",o(h.get(r).fingerWidth)).attr("height",o(h.get(r).fingerHeight)).attr("xlink:href","assets/images/"+r+".png"),u.attr("transform","translate("+.75*a+", "+-i+")").transition().duration(500).attr("transform-origin","top left").attr("transform","translate("+(l[s].points[0][0]+(o(h.get(r).fingerWidth)-c)/2)+", "+l[s].points[0][1]+")rotate("+l[s].angle+")").attr("class","pocket-object"))}(0,t,r,e)}),m},update:function(){return s.selectAll(".outline").attr("d",function(t){return d3.select(this),u(0,t)}),s.selectAll(".pocket-object").remove(),m}};return m.init(),m});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";var r,a;void 0===(a="function"==typeof(r=function(){return function(t){function e(){m=!1;var t=function(){if(u&&"number"==typeof u){var t=Math.min(Math.max(0,u),1);return f-t*f}return f}();(g=g.filter(function(e){var n=e.getBoundingClientRect().top<t;if(n&&!e.__enter_view){if(o(e),d)return!1}else!n&&e.__enter_view&&s&&s(e);return e.__enter_view=n,!0})).length||window.removeEventListener("scroll",n,!0)}function n(){m||(m=!0,h(e))}function r(){(function(){var t=document.documentElement.clientHeight,e=window.innerHeight||0;f=Math.max(t,e)})(),e()}function a(t){for(var e=t.length,n=[],r=0;r<e;r+=1)n.push(t[r]);return n}var i=t.selector,o=t.enter,s=t.exit,l=t.offset,u=void 0===l?0:l,c=t.once,d=void 0!==c&&c,h=null,m=!1,g=[],f=0;i&&o||console.error("must set selector and enter options"),h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof t?a(e.querySelectorAll(t)):t instanceof NodeList?a(t):t instanceof Array?t:void 0}(i),window.addEventListener("resize",r,!0),window.addEventListener("scroll",n,!0),r(),e()}})?r.call(e,n,e,t):r)||(t.exports=a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(18);var r=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),a=null,i=null,o=d3.selectAll(".fit-container"),s=o.selectAll(".fit-table");o.select(".ui-brand"),o.select(".ui-style"),o.select(".ui-price"),e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){a=t[0],function(){var t=s;i=a.sort(function(t,e){return d3.ascending(t.brand,e.brand)});var e=d3.nest().key(function(t){return t.menWomen}).entries(i);t.selectAll(".chart").data(e).enter().append("div.chart").at("data-object",null).rectChart()}()}).catch(function(t){return console.log(t)})},resize:function(){}}},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};d3.selection.prototype.rectChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),a=e.at("data-object"),i=0,o=0,s=d3.scaleLinear(),l=null,u=null,c=null,d=[];function h(t){var e=d3.select(this),n=[10,10],a=[10,10+s(t.maxHeightFront)],i=[10+s(t.maxWidthFront/2),s(t.maxHeightFront+2)+10],o=[10+s(.8*t.maxWidthFront),s(.8*t.maxHeightFront)+10],l=[10+s(t.maxWidthFront),s(t.minHeightFront)+10],u=[10+s(t.maxWidthFront),s(t.minHeightFront)+10],c=[10+s(t.maxWidthFront-3),s(t.maxHeightFront)+10],h=[10+s(t.maxWidthFront),s(t.rivetHeightFront)+10],g=[10+s(t.maxWidthFront),s(t.rivetHeightFront)+10],f=[10+s(t.minWidthFront/2),s(.4*t.maxWidthFront)+10],p=[10+s(t.maxWidthFront-t.minWidthFront),10],v=null,x=null;if("TRUE"==t.cutout){v=["M",n,"L",a,"L",c,"Q",o,u,"L",h,"Q",f,p,"L",n].join(" ");var b=m(c,o,u),k=m(h,f,p),y=d3.range(10).map(function(t,e,n){return b(t/(n.length-1))}),H=d3.range(10).map(function(t,e,n){return k(t/(n.length-1))});x=[n,a].concat(y).concat(H).concat([n])}else{v=["M",n,"L",a,"Q",i,l,"L",g,"Q",f,p,"L",n].join(" ");var W=m(a,i,l),F=m(g,f,p),w=d3.range(10).map(function(t,e,n){return W(t/(n.length-1))}),A=d3.range(10).map(function(t,e,n){return F(t/(n.length-1))});x=[n].concat(w).concat(A).concat([n])}var B=d3.range(150,180,5),_=d3plus.largestRect(x,{nTries:100,aspectRatio:.5,cache:!1}),E=d3plus.largestRect(x,{nTries:100,aspectRatio:.1,cache:!1}),M=d3plus.largestRect(x,{nTries:100,aspectRatio:.8,cache:!1}),j=d3plus.largestRect(x,{nTries:100,aspectRatio:.57,cache:!1,angle:B}),O=d3.polygonArea(x),I=[t].map(function(t){return r({},t,{pocketArea:O,rectanglePhone:_,rectanglePen:E,rectangleWallet:M,rectangleHand:j})});d.push(I[0]),e.append("path.outline").attr("d",v),e.append("path.largestRect").attr("d",function(t){return["M",M.points[0],"L",M.points[1],"L",M.points[2],"L",M.points[3],"L",M.points[4]].join(" ")})}function m(t,e,n){return function(r){return[Math.pow(1-r,2)*t[0]+2*(1-r)*r*e[0]+Math.pow(r,2)*n[0],Math.pow(1-r,2)*t[1]+2*(1-r)*r*e[1]+Math.pow(r,2)*n[1]]}}var g=d3.map([{object:"phone",width:7,height:14}],function(t){return t.object}),f={init:function(){e.append("text.tk-atlas.text-menWomen").text(function(t){return t.key+"'s"});var t=e.append("div.container");c=t.selectAll(".fit-brand").data(function(t){return t.values}).enter().append("div.area-front").attr("class","fit-brand visible"),u=c.append("div.display");var n=c.append("div.tooltip");l=u.append("svg.fit-canvas");var r=u.append("div.text");r.append("text.brand.tk-atlas").text(function(t){return t.brand}),r.append("text.style.tk-atlas").text(function(t){return t.updatedStyle});var a=n.append("div.tooltip-text"),i=d3.format("$.2f");a.append("text.tk-atlas").text(function(t){return t.name}),a.append("text.tk-atlas").text(function(t){return""+i(t.price)}),a.append("text.tk-atlas").text(function(t){return t.fabric}),l.append("g").append("g.g-vis"),f.resize(),f.render()},resize:function(){return e.selectAll(".fit-brand").st("width",225).st("height",d3.round(299.25,0)).selectAll(".display, .tooltip").st("width",225).st("height",d3.round(299.25,0)),i=225,o=175,l.at({width:i+0+0,height:o+50+0}),s.domain([0,29]).range([0,o]),f},render:function(){var t=l.select(".g-vis");return t.selectAll(".outline").data(function(t){return[t]}).enter().append("g").each(h),"women"==n.key&&(window.outputW=JSON.stringify(d)),"men"==n.key&&(window.outputM=JSON.stringify(d)),t.selectAll(".measure measure-maxHeight").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","end").attr("transform",function(t){return"translate(5, "+s(t.maxHeightFront/2)+")"}).attr("class","tk-atlas measure measure-maxHeight"),t.selectAll(".measure measure-minHeight").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.minHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","start").attr("transform",function(t){return"translate("+(s(t.maxWidthFront)+15)+", "+s(t.rivetHeightFront+(t.minHeightFront-t.rivetHeightFront)/2)+")"}).attr("class","tk-atlas measure measure-minHeight"),t.selectAll(".measure measure-maxWidth").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("transform",function(t){return"translate("+(s(t.maxWidthFront/2)+10)+", "+(s(t.maxHeightFront)+25)+")"}).attr("class","tk-atlas measure measure-maxWidth"),t.selectAll(".measure measure-minWidth").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.minWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("transform",function(t){return"translate("+(s(t.maxWidthFront-t.minWidthFront+t.minWidthFront/2)+10)+", "+s(t.rivetHeightFront/2)+")"}).attr("class","tk-atlas measure measure-minWidth"),t.node().getBBox().width,t.attr("transform",function(e){var n=this.getBBox().width,r=t.selectAll(".measure-maxHeight").node().getBBox().width;return"translate("+((i-n)/2+r/2)+", 0)"}),f},data:function(t){return arguments.length?(n=t,e.datum(n),f.render(),f):n},toggle:function(t,e,n){return c.classed("visible",function(r){return!(r.brand!=t&&"All"!=t||r.style!=n&&"All"!=n||r.priceGroup!=e&&"All"!=e)}),f},dim:function(){return c.select(".display").classed("dimmed",function(t){var e=g.get(a).width,n=g.get(a).height,r=d3.select(this).select(".outline").at("d");if(d3plus.path2polygon(r,[20]),t.minWidthFront,t.minHeightFront,t.rivetHeightFront,t.minWidthFront<e||t.maxHeightFront<n)return!0}),f}};return f.init(),f});return e.length>1?e:e.pop()}}]);