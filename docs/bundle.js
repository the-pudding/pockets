!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(){return new Promise(function(t,e){!function(t){d3.loadData("assets/data/measurementsRectangles.json",function(e,n){var i=n[0].map(function(t,e){return r({},t,{waistSize:+t.waistSize,price:+t.price,maxHeightFront:+t.maxHeightFront,minHeightFront:+t.minHeightFront,rivetHeightFront:+t.rivetHeightFront,maxWidthFront:+t.maxWidthFront,minWidthFront:+t.minWidthFront,maxHeightBack:+t.maxHeightBack,minHeightBack:+t.minHeightBack,maxWidthBack:+t.maxWidthBack,minWidthBack:+t.minWidthBack})});t(e,i)})}(function(n,r){n?e("error loading data"):t(r)})})}},function(t,e,n){"use strict";var r=u(n(2)),i=u(n(4)),a=(u(n(5)),u(n(7))),o=u(n(10)),l=u(n(12)),s=u(n(15));function u(t){return t&&t.__esModule?t:{default:t}}u(n(16));var c=d3.select("body"),d=0;c.classed("is-mobile",i.default.any()),window.addEventListener("resize",(0,r.default)(function(){var t=c.node().offsetWidth;d!==t&&(d=t)},150)),function(){if(c.select("header").classed("is-sticky")){var t=c.select(".header__menu"),e=c.select(".header__toggle");e.on("click",function(){var n=t.classed("is-visible");t.classed("is-visible",!n),e.classed("is-visible",!n)})}}(),(0,s.default)({selector:".scroll",offset:.5,enter:function(t){var e=d3.select(".logo"),n=d3.select(".is-sticky");e.transition().duration(300).style("display","none").style("opacity","0"),n.transition().duration(200).style("height","35px")},exit:function(t){var e=d3.select(".logo");d3.select(".is-sticky").transition().duration(200).style("height","155px"),e.transition().duration(300).style("display","block").style("opacity","1")}}),a.default.init(),o.default.init(),l.default.init()},function(t,e,n){(function(e){var n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,d=u||c||Function("return this")(),h=Object.prototype.toString,f=Math.max,g=Math.min,m=function(){return d.Date.now()};function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function v(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&h.call(t)==r}(t))return n;if(p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var u=o.test(t);return u||l.test(t)?s(t.slice(2),u?2:8):a.test(t)?n:+t}t.exports=function(t,e,n){var r,i,a,o,l,s,u=0,c=!1,d=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function x(e){var n=r,a=i;return r=i=void 0,u=e,o=t.apply(a,n)}function b(t){var n=t-s;return void 0===s||n>=e||n<0||d&&t-u>=a}function y(){var t=m();if(b(t))return F(t);l=setTimeout(y,function(t){var n=e-(t-s);return d?g(n,a-(t-u)):n}(t))}function F(t){return l=void 0,h&&r?x(t):(r=i=void 0,o)}function H(){var t=m(),n=b(t);if(r=arguments,i=this,s=t,n){if(void 0===l)return function(t){return u=t,l=setTimeout(y,e),c?x(t):o}(s);if(d)return l=setTimeout(y,e),x(s)}return void 0===l&&(l=setTimeout(y,e)),o}return e=v(e)||0,p(n)&&(c=!!n.leading,a=(d="maxWait"in n)?f(v(n.maxWait)||0,e):a,h="trailing"in n?!!n.trailing:h),H.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=s=i=l=void 0},H.flush=function(){return void 0===l?o:F(m())},H}}).call(this,n(3))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n(6);var i=null,a=d3.selectAll(".area-graphic");e.default={init:function(){return new Promise(function(t){d3.loadData("assets/data/measurements.csv",function(e,n){i=n[0].map(function(t,e){return r({},t,{waistSize:+t.waistSize,price:+t.price,maxHeightFront:+t.maxHeightFront,minHeightFront:+t.minHeightFront,rivetHeightFront:+t.rivetHeightFront,maxWidthFront:+t.maxWidthFront,minWidthFront:+t.minWidthFront,maxHeightBack:+t.maxHeightBack,minHeightBack:+t.minHeightBack,maxWidthBack:+t.maxWidthBack,minWidthBack:+t.minWidthBack})}),function(){var t=a,e=i.map(function(t){var e;return e="boot-cut"==t.style?"straight":"regular"==t.style?"straight":"slim"==t.style?"skinny":t.style,r({},t,{updatedStyle:e,group:t.menWomen+" - "+e})}),n=d3.nest().key(function(t){return t.group}).entries(e);t.selectAll(".chart").data(n).enter().append("div.chart").areaChart()}(),t()})})},resize:function(){}}},function(t,e,n){"use strict";d3.selection.prototype.areaChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r=0,i=0,a=d3.scaleLinear(),o=null,l=null,s={init:function(){e.append("text").text(function(t){return""+t.key});var t=e.append("div.container");(o=t.append("svg.area-front")).append("g").append("g.g-vis"),(l=t.append("svg.area-back")).append("g").append("g.g-vis"),s.resize(),s.render()},resize:function(){return r=e.node().offsetWidth-0-0,i=e.node().offsetHeight-0-0,o.at({width:r+0+0,height:i+0+0}),l.at({width:r+0+0,height:i+0+0}),a.domain([0,29]).range([0,280]),s},render:function(){return o.select(".g-vis").selectAll(".outline").data(function(t){return t.values}).enter().append("path").attr("d",function(t){var e=["M",[10,10],"l",[0,a(t.maxHeightFront)],"q",[a(t.maxWidthFront/2),a(.1*t.maxHeightFront)],[a(t.maxWidthFront),a(t.minHeightFront-t.maxHeightFront)],"l",[0,-a(t.minHeightFront-t.rivetHeightFront)],"q",[-a(2*t.minWidthFront/3),a(.1*t.maxHeightFront)],[-a(t.minWidthFront),-a(t.rivetHeightFront)],"l",[-a(t.maxWidthFront-t.minWidthFront),0]],n=e.filter(function(t){return!["M","l","L","Q","q"].includes(t)});return d3.polygonArea(n),e.join(" ")}).attr("class","outline"),l.select(".g-vis").selectAll(".outline").data(function(t){return t.values}).enter().append("path").attr("d",function(t){var e=["M",[10,10],"l",[a((t.maxWidthBack-t.minWidthBack)/2),a(t.minHeightBack)],"l",[a(t.minWidthBack/2),a(t.maxHeightBack-t.minHeightBack)],"l",[a(t.minWidthBack/2),-a(t.maxHeightBack-t.minHeightBack)],"l",[a((t.maxWidthBack-t.minWidthBack)/2),-a(t.minHeightBack)],"l",[-a(t.maxWidthBack),0]],n=e.filter(function(t){return!["M","l","L","Q","q"].includes(t)});return d3.polygonArea(n),e.join(" ")}).attr("class","outline"),s},data:function(t){return arguments.length?(n=t,e.datum(n),s.render(),s):n}};return s.init(),s});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(0));function i(t){return t&&t.__esModule?t:{default:t}}n(8);var a=null,o=(0,i(n(9)).default)(),l=null,s=d3.selectAll(".scroll-graphic"),u=d3.selectAll(".scroll"),c=u.select(".scroll-graphic"),d=(c.select(".scroll-svg"),u.select(".scroll-text").selectAll(".step"));function h(){window.innerWidth;var t=Math.floor(window.innerHeight);console.log({stepHeight:t}),d.style("height",t+"px");var e=u.node().offsetWidth;c.style("width",e+"px"),o.resize()}function f(t){var e=t.index;l(e)}e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){a=t[0],function(){var t=s,e=(d3.nest().key(function(t){return t.menWomen}).entries(a),d3.nest().key(function(t){return t.menWomen}).rollup(function(t,e){var n={brand:"average",maxHeightFront:d3.round(d3.mean(t,function(t){return t.maxHeightFront}),1),minHeightFront:d3.round(d3.mean(t,function(t){return t.minHeightFront}),1),rivetHeightFront:d3.round(d3.mean(t,function(t){return t.rivetHeightFront}),1),maxWidthFront:d3.round(d3.mean(t,function(t){return t.maxWidthFront}),1),minWidthFront:d3.round(d3.mean(t,function(t){return t.minWidthFront}),1),maxHeightBack:d3.round(d3.mean(t,function(t){return t.maxHeightBack}),1),minHeightBack:d3.round(d3.mean(t,function(t){return t.minHeightBack}),1),maxWidthBack:d3.round(d3.mean(t,function(t){return t.maxWidthBack}),1),minWidthBack:d3.round(d3.mean(t,function(t){return t.minWidthBack}),1)};return t[t.length]=n,t}).entries(a)),n=t.datum(e).scrollChart();l=n.toggle,h(),o.setup({container:".scroll",graphic:".scroll-graphic",text:".scroll-text",step:".step",debug:!1,offset:.85}).onStepEnter(f)}()}).catch(function(t){return console.log(t)})},resize:h}},function(t,e,n){"use strict";d3.selection.prototype.scrollChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r=0,i=0,a=0,o=60,l=40,s=10,u="rgba(231, 80, 63, 0.2)",c="rgba(246, 194, 47, 0.2)",d=d3.scaleLinear(),h=null,f=null,g=n.filter(function(t){return"men"==t.key})[0].value,m=d3.max(g.map(function(t){return t.maxWidthFront})),p=null,v={init:function(){var t=e.append("div.container");h=t.append("svg.scroll-svg"),f=h.selectAll(".group-mw").data(n).enter().append("g").attr("class",function(t){return"group-mw group-"+t.key}),v.resize(),v.render()},resize:function(){return r=e.node().offsetWidth-l-25,i=340,h.at({width:r+l+25,height:i+o+0}),a=r+l+25,d.domain([0,29]).range([0,i]),p=d(m),v},render:function(){f.selectAll(".outline").data(function(t){return console.log({d:t}),t.value}).enter().append("path").attr("d",function(t){var e=["M",[s,s],"l",[0,d(t.maxHeightFront)],"q",[d(t.maxWidthFront/2),d(.1*t.maxHeightFront)],[d(t.maxWidthFront),d(t.minHeightFront-t.maxHeightFront)],"l",[0,-d(t.minHeightFront-t.rivetHeightFront)],"q",[-d(2*t.minWidthFront/3),d(.1*t.maxHeightFront)],[-d(t.minWidthFront),-d(t.rivetHeightFront)],"l",[-d(t.maxWidthFront-t.minWidthFront),0]],n=e.filter(function(t){return!["M","l","L","Q","q"].includes(t)});return d3.polygonArea(n),e.join(" ")}).attr("class",function(t){return"average"==t.brand?"outline-average":"outline"}).attr("stroke-dasharray",function(t){return this.getTotalLength()}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).style("fill","none"),f.selectAll(".label").data(function(t){return[t]}).enter().append("text").text(function(t){return console.log(t),t.key}).attr("class","label tk-atlas");var t=f.append("g").attr("class","g-measurements").attr("opacity",0);return t.selectAll(".measure-line-maxHeight").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("path").attr("d",function(t){console.log({d:t});var e=null;return t.maxHeightFront<20?(console.log("woman"),e=["M",[s,s],"l",[-20,0],"l",[0,d(t.maxHeightFront)],"l",[s,0]]):(console.log("man"),e=["M",[s,s],"l",[-48,0],"l",[0,d(t.maxHeightFront)],"l",[48,0]]),e.join(" ")}).attr("class",function(t){return t.maxHeightFront<20?"measure-line measure-line-maxHeight measure-line-woman":"measure-line measure-line-maxHeight measure-line-man"}),t.selectAll(".measure-line-maxWidth").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("path").attr("d",function(t){console.log({d:t});var e=null;return t.maxHeightFront<20?(console.log("woman"),e=["M",[s,s],"l",[0,-20],"l",[d(t.maxWidthFront),0],"l",[0,d(t.minHeightFront-t.rivetHeightFront)]]):(console.log("man"),e=["M",[s,s],"l",[0,-48],"l",[d(t.maxWidthFront),0],"l",[0,d(t.minHeightFront-t.rivetHeightFront)]]),e.join(" ")}).attr("class",function(t){return t.maxHeightFront<20?"measure-line measure-line-maxHeight measure-line-woman":"measure-line measure-line-maxHeight measure-line-man"}),t.selectAll(".measure-maxHeight-bg").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("transform",function(t){return t.maxHeightFront<20?"translate(-10, "+d(t.maxHeightFront/2)+")":"translate(-38, "+d(t.maxHeightFront/2)+")"}).attr("class","tk-atlas measure-bg measure-maxHeight-bg"),t.selectAll(".measure measure-maxHeight").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("transform",function(t){return t.maxHeightFront<20?"translate(-10, "+d(t.maxHeightFront/2)+")":"translate(-38, "+d(t.maxHeightFront/2)+")"}).attr("class","tk-atlas measure measure-maxHeight"),t.selectAll(".measure-maxWidth-bg").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("transform",function(t){return t.maxHeightFront<20?"translate("+(d(t.maxWidthFront/2)+s)+", "+-20+")":"translate("+(d(t.maxWidthFront/2)+s)+", "+-48+")"}).attr("class","tk-atlas measure-bg measure-maxWidth-bg"),t.selectAll(".measure measure-maxWidth").data(function(t,e){var n=t.value;return[n[n.length-1]]}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("transform",function(t){return t.maxHeightFront<20?"translate("+(d(t.maxWidthFront/2)+s)+", "+-20+")":"translate("+(d(t.maxWidthFront/2)+s)+", "+-48+")"}).attr("class","tk-atlas measure measure-maxWidth"),h.select(".group-women").attr("transform","translate(40, 60)"),h.select(".group-men").attr("transform","translate("+(a-p-s)+", "+o+")"),v},data:function(t){return arguments.length?(n=t,e.datum(n),v.render(),v):n},toggle:function(t){var e=h.select(".group-women"),n=h.select(".group-men"),r=h.selectAll(".label"),i=h.selectAll(".g-measurements");0==t&&(e.transition().duration(500).attr("transform","translate(40, 60)"),e.selectAll(".outline").style("stroke-opacity",.1).transition().duration(500).delay(function(t,e){return 100*e}).attr("stroke-dashoffset",0),n.transition().duration(500).attr("transform","translate("+(a-p-s)+", "+o+")"),n.selectAll(".outline").style("stroke-opacity",.1).transition().duration(500).delay(function(t,e){return 100*e}).attr("stroke-dashoffset",0),e.selectAll(".outline-average").attr("stroke-dashoffset",function(t){return this.getTotalLength()}).attr("opacity",0).style("fill","none"),n.selectAll(".outline-average").attr("stroke-dashoffset",function(t){return this.getTotalLength()}).attr("opacity",0).style("fill","none"),r.attr("opacity",1),i.attr("opacity",0)),1==t&&(e.transition().duration(500).attr("transform","translate(40, 60)"),n.transition().duration(500).attr("transform","translate("+(a-p-s)+", "+o+")"),e.selectAll(".outline-average").raise().transition().duration(500).delay(function(t,e){return 100*e}).attr("stroke-dashoffset",0).attr("opacity",1).style("fill",u),n.selectAll(".outline-average").raise().transition().duration(500).delay(function(t,e){return 100*e}).attr("stroke-dashoffset",0).attr("opacity",1).style("fill",c),e.selectAll(".outline").style("stroke-opacity",.1).transition().duration(800).style("stroke-opacity",.05),n.selectAll(".outline").style("stroke-opacity",.1).transition().duration(800).style("stroke-opacity",.05),r.attr("opacity",1),i.attr("opacity",0)),2==t&&(e.transition().duration(500).attr("transform","translate("+(a-p)/2+", "+o+")"),n.transition().duration(500).attr("transform","translate("+(a-p)/2+", "+o+")"),e.selectAll(".outline").transition().duration(800).style("stroke-opacity",0),n.selectAll(".outline").transition().duration(800).style("stroke-opacity",0),e.selectAll(".outline-average").attr("opacity",1).style("fill",u),n.selectAll(".outline-average").attr("opacity",1).style("fill",c),r.transition().duration(800).attr("opacity",0),i.transition().duration(800).attr("opacity",1))}};return v.init(),v});return e.length>1?e:e.pop()}},function(t,e,n){t.exports=function(){"use strict";function t(t){for(var e=t.length,n=[],r=0;r<e;r+=1)n.push(t[r]);return n}function e(t){return t instanceof Element?t:"string"==typeof t?document.querySelector(t):null}function n(t){return"scrollama__debug-step--"+t.id+"-"+t.i}function r(t){return"scrollama__debug-offset--"+t.id}function i(t){var e=t.id,i=t.offsetVal,a=t.stepEl,o=a[0].getAttribute("class");a.forEach(function(t,r){return function(t){var e=n({id:t.id,i:t.i}),r=document.createElement("div");r.setAttribute("id",e+"_above"),r.setAttribute("class","scrollama__debug-step"),r.style.position="fixed",r.style.left="0",r.style.width="100%",r.style.backgroundImage="repeating-linear-gradient(45deg, green 0, green 2px, white 0, white 40px)",r.style.border="2px solid green",r.style.opacity="0.33",r.style.zIndex="9999",r.style.display="none",document.body.appendChild(r);var i=document.createElement("div");i.setAttribute("id",e+"_below"),i.setAttribute("class","scrollama__debug-step"),i.style.position="fixed",i.style.left="0",i.style.width="100%",i.style.backgroundImage="repeating-linear-gradient(135deg, orange 0, orange 2px, white 0, white 40px)",i.style.border="2px solid orange",i.style.opacity="0.33",i.style.zIndex="9999",i.style.display="none",document.body.appendChild(i)}({id:e,i:r})}),function(t){var e=t.id,n=t.offsetVal,i=t.stepClass,a=document.createElement("div");a.setAttribute("id",r({id:e})),a.setAttribute("class","scrollama__debug-offset"),a.style.position="fixed",a.style.left="0",a.style.width="100%",a.style.height="0px",a.style.borderTop="2px dashed black",a.style.zIndex="9999";var o=document.createElement("p");o.innerText='".'+i+'" trigger: '+n,o.style.fontSize="12px",o.style.fontFamily="monospace",o.style.color="black",o.style.margin="0",o.style.padding="6px",a.appendChild(o),document.body.appendChild(a)}({id:e,offsetVal:i,stepClass:o})}function a(t){var e=t.id,i=t.stepOffsetHeight,a=t.offsetMargin;t.offsetVal,i.forEach(function(t,r){return function(t){var e=t.h,r=t.offsetMargin,i=n({id:t.id,i:t.i}),a=document.querySelector("#"+i+"_above");a.style.height=e+"px",a.style.top=r-e+"px";var o=document.querySelector("#"+i+"_below");o.style.height=e+"px",o.style.top=r+"px"}({id:e,h:t,i:r,offsetMargin:a})}),function(t){var e=t.offsetMargin,n=r({id:t.id});document.querySelector("#"+n).style.top=e+"px"}({id:e,offsetMargin:a})}function o(t){var e=t.id,r=t.index,i=t.state,a=n({id:e,i:r}),o=document.querySelector("#"+a+"_above"),l=document.querySelector("#"+a+"_below"),s="enter"===i?"block":"none";o&&(o.style.display=s),l&&(l.style.display=s)}return function(){var n=1,r={},l={},s=null,u=null,c=null,d=null,h=0,f=0,g=0,m=0,p=null,v=null,x=null,b=!1,y=!1,F=!1,H=!1,w=0,W=!1,k=!1,A=null,B=null,j=-1,M=null,E=[];function _(t){var e=0;if(t.offsetParent)do{e+=t.offsetTop,t=t.offsetParent}while(t);return e<0?0:e}function O(t){return+t.getAttribute("data-scrollama-index")}function P(){window.pageYOffset>j?M="down":window.pageYOffset<j&&(M="up"),j=window.pageYOffset}function L(){g=window.innerHeight,m=function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}(),x=u?u.getBoundingClientRect():null,f=h*g,p=c?c.map(function(t){return t.offsetHeight}):[],v=c?c.map(_):[],y&&b&&U(),F&&a({id:d,stepOffsetHeight:p,offsetMargin:f,offsetVal:h})}function z(t){t&&!y?(b&&U(),y=!0):t||(l.top&&l.top.disconnect(),l.bottom&&l.bottom.disconnect(),l.stepAbove&&l.stepAbove.forEach(function(t){return t.disconnect()}),l.stepBelow&&l.stepBelow.forEach(function(t){return t.disconnect()}),l.stepProgress&&l.stepProgress.forEach(function(t){return t.disconnect()}),l.viewportAbove&&l.viewportAbove.forEach(function(t){return t.disconnect()}),l.viewportBelow&&l.viewportBelow.forEach(function(t){return t.disconnect()}),y=!1)}function R(t,e){if("above"===e)for(var n=0;n<t;n++){var r=A[n];"enter"===r.state&&S(c[n]),"up"===r.direction&&(T(c[n],"down"),S(c[n]))}else if("below"===e)for(var i=A.length-1;i>t;i--){var a=A[i];"enter"===a.state&&S(c[i]),"down"===a.direction&&(T(c[i],"up"),S(c[i]))}}function T(t,e){void 0===e&&(e=!0);var n=O(t),i={element:t,index:n,direction:M};A[n].direction=M,A[n].state="enter",W&&e&&"down"===M&&R(n,"above"),W&&e&&"up"===M&&R(n,"below"),r.stepEnter&&"function"==typeof r.stepEnter&&!E[n]&&(r.stepEnter(i,A),F&&o({id:d,index:n,state:"enter"}),k&&(E[n]=!0)),H&&C(t,"down"===M?0:1)}function S(t){var e=O(t),n={element:t,index:e,direction:M};A[e].direction=M,A[e].state="exit",H&&C(t,"down"===M?1:0),r.stepExit&&"function"==typeof r.stepExit&&(r.stepExit(n,A),F&&o({id:d,index:e,state:"exit"}))}function C(t,e){var n={element:t,index:O(t),progress:e};r.stepProgress&&"function"==typeof r.stepProgress&&r.stepProgress(n)}function q(){var t={direction:M};B.direction=M,B.state="enter",r.containerEnter&&"function"==typeof r.containerEnter&&r.containerEnter(t)}function I(){var t={direction:M};B.direction=M,B.state="exit",r.containerExit&&"function"==typeof r.containerExit&&r.containerExit(t)}function Q(t){P(),t.forEach(function(t){var e=t.isIntersecting,r=t.boundingClientRect,i=t.target,a=r.bottom,o=r.height,l=a-f,s=O(i),u=A[s];l>=-n&&(e&&"down"===M&&"enter"!==u.state?T(i,M):e||"up"!==M||"enter"!==u.state?!e&&l>=o&&"down"===M&&"enter"===u.state&&S(i):S(i))})}function N(t){P(),t.forEach(function(t){var e=t.isIntersecting,r=t.boundingClientRect,i=t.target,a=r.bottom,o=r.height,l=a-f,s=O(i),u=A[s];l>=-n&&l<o&&e&&"up"===M&&"enter"!==u.state?T(i,M):l<=n&&!e&&"down"===M&&"enter"===u.state&&S(i)})}function $(t){P(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,r=O(n),i=A[r];e&&"down"===M&&"enter"!==i.state&&"down"!==i.direction&&(T(n,"down"),S(n))})}function V(t){P(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,r=O(n),i=A[r];e&&"up"===M&&"enter"!==i.state&&"up"!==i.direction&&(T(n,"up"),S(n))})}function D(t){P(),t.forEach(function(t){var e=t.isIntersecting,r=t.intersectionRatio,i=t.boundingClientRect,a=t.target,o=i.bottom;e&&o-f>=-n&&C(a,+r.toFixed(3))})}function Y(t){P();var e=t[0],r=e.isIntersecting,i=e.boundingClientRect;(i.top,i.bottom)>-n&&(r?q():"enter"===B.state&&I())}function G(t){P();var e=t[0],r=e.isIntersecting;e.boundingClientRect.top<n&&(r?q():"enter"===B.state&&I())}function U(){l.viewportAbove&&l.viewportAbove.forEach(function(t){return t.disconnect()}),l.viewportAbove=c.map(function(t,e){var n=v[e],r=-(g-f+p[e]),i=new IntersectionObserver($,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return i.observe(t),i}),l.viewportBelow&&l.viewportBelow.forEach(function(t){return t.disconnect()}),l.viewportBelow=c.map(function(t,e){var n=-(f+p[e]),r=m-v[e]-p[e]-f,i=new IntersectionObserver(V,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return i.observe(t),i}),l.stepAbove&&l.stepAbove.forEach(function(t){return t.disconnect()}),l.stepAbove=c.map(function(t,e){var n=p[e],r=new IntersectionObserver(Q,{root:null,rootMargin:n+"px 0px "+(-g+f)+"px 0px",threshold:0});return r.observe(t),r}),l.stepBelow&&l.stepBelow.forEach(function(t){return t.disconnect()}),l.stepBelow=c.map(function(t,e){var n=-f,r=m-g+p[e]+f,i=new IntersectionObserver(N,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return i.observe(t),i}),H&&(l.stepProgress&&l.stepProgress.forEach(function(t){return t.disconnect()}),l.stepProgress=c.map(function(t,e){var n=p[e]-f+"px 0px "+(-g+f)+"px 0px",r=function(t){for(var e=Math.ceil(t/w),n=[],r=1/e,i=0;i<e;i++)n.push(i*r);return n}(p[e]),i=new IntersectionObserver(D,{root:null,rootMargin:n,threshold:r});return i.observe(t),i})),s&&u&&(function(){l.top&&l.top.unobserve(s);var t={root:null,rootMargin:g+"px 0px -"+g+"px 0px",threshold:0};l.top=new IntersectionObserver(Y,t),l.top.observe(s)}(),function(){l.bottom&&l.bottom.unobserve(s);var t={root:null,rootMargin:"-"+x.height+"px 0px "+x.height+"px 0px",threshold:0};l.bottom=new IntersectionObserver(G,t),l.bottom.observe(s)}())}var J={setup:function(n){var r=n.container,a=n.graphic,o=n.step,l=n.offset;void 0===l&&(l=.5);var f=n.progress;void 0===f&&(f=!1);var g=n.threshold;void 0===g&&(g=4);var m=n.debug;void 0===m&&(m=!1);var p=n.order;void 0===p&&(p=!0);var v=n.once;return void 0===v&&(v=!1),d=function(){var t="abcdefghijklmnopqrstuv",e=t.length,n=(new Date).getTime();return""+[0,0,0].map(function(n){return t[Math.floor(Math.random()*e)]}).join("")+n}(),c=function(e,n){return void 0===n&&(n=document),"string"==typeof e?t(n.querySelectorAll(e)):e instanceof NodeList?t(e):e instanceof Array?e:[]}(o),s=r?e(r):null,u=a?e(a):null,c.length?(F=m,H=f,W=p,k=v,J.offsetTrigger(l),w=Math.max(1,+g),b=!0,F&&i({id:d,stepEl:c,offsetVal:h}),c.forEach(function(t,e){return t.setAttribute("data-scrollama-index",e)}),A=c.map(function(){return{direction:null,state:null}}),B={direction:null,state:null},L(),z(!0),J):(console.error("scrollama error: no step elements"),J)},resize:function(){return L(),J},enable:function(){return z(!0),J},disable:function(){return z(!1),J},destroy:function(){z(!1),Object.keys(r).forEach(function(t){return r[t]=null}),Object.keys(l).forEach(function(t){return l[t]=null})},offsetTrigger:function(t){return t&&(isNaN(t),1)?(h=Math.min(Math.max(0,t),1),J):h},onStepEnter:function(t){return r.stepEnter=t,J},onStepExit:function(t){return r.stepExit=t,J},onStepProgress:function(t){return r.stepProgress=t,J},onContainerEnter:function(t){return r.containerEnter=t,J},onContainerExit:function(t){return r.containerExit=t,J}};return J}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(11);var r=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),i=null,a=d3.selectAll(".debunk-graphic");function o(){var t=d3.select(this),e=d3.nest().key(function(t){return t.group}).entries(i),n=t.at("data-location");t.selectAll(".chart").data(e).enter().append("div.chart").attr("data-location",n).debunkingChart()}e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){i=t[0],a.each(o)}).catch(function(t){return console.log(t)})},resize:function(){}}},function(t,e,n){"use strict";d3.selection.prototype.debunkingChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r=e.at("data-location"),i=0,a=0,o=d3.scaleLinear(),l=null,s={init:function(){e.append("text").text(function(t){return(""+t.key).split(" ")[0]+"'s "+(""+t.key).split(" ")[2]}).attr("class","chart-label");var t=e.append("div.container");(l=t.append("svg.debunk")).append("g").append("g.g-vis"),s.resize(),s.render()},resize:function(){return i=e.node().offsetWidth-0-0,a=e.node().offsetHeight-0-0,l.at({width:i+0+0,height:a+0+0}),o.domain([0,29]).range([0,280]),s},render:function(){return"front"==r?l.select(".g-vis").selectAll(".outline").data(function(t){return t.values}).enter().append("path").attr("d",function(t){return["M",[10,10],"l",[0,o(t.maxHeightFront)],"q",[o(t.maxWidthFront/2),o(.1*t.maxHeightFront)],[o(t.maxWidthFront),o(t.minHeightFront-t.maxHeightFront)],"l",[0,-o(t.minHeightFront-t.rivetHeightFront)],"q",[-o(2*t.minWidthFront/3),o(.1*t.maxHeightFront)],[-o(t.minWidthFront),-o(t.rivetHeightFront)],"l",[-o(t.maxWidthFront-t.minWidthFront),0]].join(" ")}).attr("class","outline"):"back"==r&&l.select(".g-vis").selectAll(".outline").data(function(t){return t.values}).enter().append("path").attr("d",function(t){return["M",[10,10],"l",[o((t.maxWidthBack-t.minWidthBack)/2),o(t.minHeightBack)],"l",[o(t.minWidthBack/2),o(t.maxHeightBack-t.minHeightBack)],"l",[o(t.minWidthBack/2),-o(t.maxHeightBack-t.minHeightBack)],"l",[o((t.maxWidthBack-t.minWidthBack)/2),-o(t.minHeightBack)],"l",[-o(t.maxWidthBack),0]].join(" ")}).attr("class","outline"),s},data:function(t){return arguments.length?(n=t,e.datum(n),s.render(),s):n}};return s.init(),s});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(13),n(14);var r=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),i=null,a=null,o=null,l=null,s=null,u=null,c=null,d="All",h="All",f="All",g=d3.select(".fit"),m=g.select("figure"),p=g.selectAll(".fit-container"),v=p.selectAll(".fit-table"),x=p.select(".ui-brand"),b=p.select(".ui-style"),y=p.select(".ui-price"),F=d3.select("nav"),H=F.select("nav ul"),w=H.selectAll("li"),W=g.select(".btn"),k=g.selectAll(".drag-animation"),A=null,B=null,j=0,M=w.size(),E=w.node().offsetWidth,_=M*E-E,O=0;function P(t,e){t.selectAll("option").data(function(t){var n=d3.nest().key(function(t){return t[e]}).entries(a).map(function(t){return t.key});return n.unshift("All"),n}).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}),t.on("change",L)}function L(){var t=d3.select(this).at("data-dropdown"),e=this.value;"price"==t&&(f=e),"brand"==t&&(d=e),"style"==t&&(h=e),l(d,f,h),s(d,f,h)}function z(){var t=g.select(".click-sentence"),e=g.select(".stat-sentence");t.classed("is-visible")&&(t.classed("is-visible",!1),e.classed("is-visible",!0)),w.classed("is-active",!1);var n=d3.select(this);n.classed("is-active",!0);var r=n.at("data-type");o=r;var i=n.at("data-id");u(o,i),c(o,i),A(o,i),B(o,i)}function R(t){return[t,"webkit-"+t,"ms-"+t]}function T(){var t=d3.event.x,e=j-t;j=t;var n=+H.at("data-x"),r=Math.max(0,Math.min(n+e,_)),i=Math.min(Math.max(0,Math.floor(r/_*M)),M-1),a=-1*(r-O);w.classed("is-current",function(t,e){return e===i}),H.at("data-x",r),R("transform").forEach(function(t){var e="translateX("+a+"px)";H.node().style[t]=e})}function S(){var t=d3.event.x;j=t,H.classed("is-dragend",!1),F.classed("is-drag",!0)}function C(){var t=+H.at("data-x"),e=Math.min(Math.max(0,Math.floor(t/_*M)),M-1)*E,n=-1*(e-O);H.at("data-x",e),R("transform").forEach(function(t){var e="translateX("+n+"px)";H.node().style[t]=e}),H.classed("is-dragend",!0),F.classed("is-drag",!1)}e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){i=t[0],function(){d3.nest().key(function(t){return t.menWomen}).entries(i);var t=d3.nest().key(function(t){return t.menWomen}).rollup(function(t,e){return{brand:"average",maxHeightFront:d3.round(d3.mean(t,function(t){return t.maxHeightFront}),1),minHeightFront:d3.round(d3.mean(t,function(t){return t.minHeightFront}),1),rivetHeightFront:d3.round(d3.mean(t,function(t){return t.rivetHeightFront}),1),maxWidthFront:d3.round(d3.mean(t,function(t){return t.maxWidthFront}),1),minWidthFront:d3.round(d3.mean(t,function(t){return t.minWidthFront}),1),maxHeightBack:d3.round(d3.mean(t,function(t){return t.maxHeightBack}),1),minHeightBack:d3.round(d3.mean(t,function(t){return t.minHeightBack}),1),maxWidthBack:d3.round(d3.mean(t,function(t){return t.maxWidthBack}),1),minWidthBack:d3.round(d3.mean(t,function(t){return t.minWidthBack}),1)}}).entries(i);console.log({nest2:t}),d3.select(this);var e=k.selectAll(".chart").data(t).enter().append("div.chart").animateChart();A=e[1].animate,B=e[0].animate}(),function(){var t=v;a=i.sort(function(t,e){return d3.ascending(t.brand,e.brand)});var e=d3.nest().key(function(t){return t.menWomen}).entries(a),n=t.selectAll(".chart").data(e).enter().append("div.chart").fitChart();l=n[0].toggle,s=n[1].toggle,u=n[0].dim,c=n[1].dim,P(x,"brand"),P(b,"updatedStyle"),P(y,"priceGroup"),d3.select(".drag").selectAll(".click-item").on("click",z)}(),d3.drag(),H.call(d3.drag().on("drag",T).on("start",S).on("end",C)),w.on("click",z),W.on("click",function(){var t=m.classed("is-truncated"),e=t?"Show Fewer":"Show All";if(W.text(e),m.classed("is-truncated",!t),!t){var n=+W.at("data-y");window.scrollTo(0,n)}W.at("data-y",window.scrollY),m.select(".show-more").classed("is-visible",!t)})}).catch(function(t){return console.log(t)})},resize:function(){}}},function(t,e,n){"use strict";d3.selection.prototype.fitChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r=0,i=d3.scaleLinear(),a=null,o=null,l=null;function s(t){var e=d3.select(this),n=[10,10],r=[10,10+i(t.maxHeightFront)],a=[10+i(t.maxWidthFront/2),i(t.maxHeightFront+2)+10],o=[10+i(.8*t.maxWidthFront),i(.8*t.maxHeightFront)+10],l=[10+i(t.maxWidthFront),i(t.minHeightFront)+10],s=[10+i(t.maxWidthFront),i(t.minHeightFront)+10],u=[10+i(t.maxWidthFront-3),i(t.maxHeightFront)+10],c=[10+i(t.maxWidthFront),i(t.rivetHeightFront)+10],d=[10+i(t.maxWidthFront),i(t.rivetHeightFront)+10],h=[10+i(t.minWidthFront/2),i(.4*t.maxWidthFront)+10],f=[10+i(t.maxWidthFront-t.minWidthFront),10],g=("TRUE"==t.cutout?["M",n,"L",r,"L",u,"Q",o,s,"L",c,"Q",h,f,"L",n]:["M",n,"L",r,"Q",a,l,"L",d,"Q",h,f,"L",n]).join(" ");e.append("path.outline").attr("d",g),t.rectangleHand}var u=d3.map([{object:"phone",id:"iphone",width:7,height:14},{object:"wallet",id:"frontWallet",width:8.4,height:10.4},{object:"pen",id:"pen",width:1.5,height:14.5},{object:"hand",width:7.4,height:17.2},{object:"phone",id:"galaxy",width:6.9,height:14.7},{object:"phone",id:"pixel",width:7.6,height:15.7},{object:"hand",id:"menHand",width:7.7,height:13.4,fingerHeight:18.9,fingerWidth:9.8},{object:"hand",id:"womenHand",width:7,height:12,fingerHeight:17.2,fingerWidth:8.9}],function(t){return t.id}),c={init:function(){e.append("text.tk-atlas.text-menWomen").text(function(t){return t.key+"'s"});var t=e.append("div.container");l=t.selectAll(".fit-brand").data(function(t){return t.values}).enter().append("div.area-front").attr("class",function(t){return"fit-brand visible "+t.menWomen}),o=l.append("div.display");var n=l.append("div.tooltip");a=o.append("svg.fit-canvas");var r=o.append("div.text"),i=r.append("div.leftText"),s=r.append("div.rightText");i.append("text.style.tk-atlas").text(function(t){return t.updatedStyle}),i.append("text.brand.tk-atlas").text(function(t){return t.brand}),s.append("text.tag.tk-atlas").text(function(t){return t.menWomen.substring(0,1)});var u=n.append("div.tooltip-text"),d=d3.format("$.2f");u.append("text.tk-atlas").text(function(t){return t.name}),u.append("text.tk-atlas").text(function(t){return""+d(t.price)}),u.append("text.tk-atlas").text(function(t){return t.fabric}),a.append("g").append("g.g-vis"),c.resize(),c.render()},resize:function(){return r=o.node().offsetWidth-0-0,o.node().offsetHeight,a.at({width:r+0+0,height:300}),i.domain([0,29]).range([0,225]),c},render:function(){var t=a.select(".g-vis");return t.selectAll(".outline").data(function(t){return[t]}).enter().append("g").each(s),t.selectAll(".measure measure-maxHeight").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","end").attr("transform",function(t){return"translate(5, "+i(t.maxHeightFront/2)+")"}).attr("class","tk-atlas measure measure-maxHeight"),t.selectAll(".measure measure-minHeight").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.minHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","start").attr("transform",function(t){return"translate("+(i(t.maxWidthFront)+15)+", "+i(t.rivetHeightFront+(t.minHeightFront-t.rivetHeightFront)/2)+")"}).attr("class","tk-atlas measure measure-minHeight"),t.selectAll(".measure measure-maxWidth").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("transform",function(t){return"translate("+(i(t.maxWidthFront/2)+10)+", "+(i(t.maxHeightFront)+25)+")"}).attr("class","tk-atlas measure measure-maxWidth"),t.selectAll(".measure measure-minWidth").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.minWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("transform",function(t){return"translate("+(i(t.maxWidthFront-t.minWidthFront+t.minWidthFront/2)+10)+", "+i(t.rivetHeightFront/2)+")"}).attr("class","tk-atlas measure measure-minWidth"),t.node().getBBox().width,t.attr("transform",function(e){var n=this.getBBox().width,i=t.selectAll(".measure-maxHeight").node().getBBox().width;return"translate("+((r-n)/2+i/2)+", 0)"}),c},data:function(t){return arguments.length?(n=t,e.datum(n),c.render(),c):n},toggle:function(t,e,n){return l.classed("visible",function(r){return!(r.brand!=t&&"All"!=t||r.style!=n&&"All"!=n||r.priceGroup!=e&&"All"!=e)}),c},dim:function(t,r){l.select(".display").classed("dimmed",function(e){var n=null;"phone"==t&&(n="rectanglePhone"),"pen"==t&&(n="rectanglePen"),"wallet"==t&&(n="rectangleWallet"),"hand"==t&&(n="rectangleHand");var a=i(u.get(r).width),o=i(u.get(r).height),l=e[n];return l.width,i(e.minWidthFront),l.height,(a>i(e.minWidthFront)||a>l.width||o>l.height)&&(e.minWidthFront,!0)});var o=e.selectAll(".dimmed").size(),s=e.selectAll(".display").size();"women"==n.key?d3.select(".stat-women").text(d3.round(100-o/s*100,0)+"%"):"men"==n.key&&d3.select(".stat-men").text(d3.round(100-o/s*100,0)+"%");var d=a.select(".g-vis");return d.selectAll(".pocket-object").remove(),d.selectAll(".outline-object").data(function(t){return[t]}).enter().append("g").each(function(e){var n=d3.select(this);!function(t,e,n,r){var a=null;"phone"==e&&(a="rectanglePhone"),"pen"==e&&(a="rectanglePen"),"wallet"==e&&(a="rectangleWallet"),"hand"==e&&(a="rectangleHand");var o=n,l=i(u.get(r).width),s=i(u.get(r).height);"hand"!=e?o.append("svg:image").attr("width",l).attr("height",s).attr("xlink:href","assets/images/"+r+".png").attr("transform-origin","top left").attr("transform","translate("+t[a].points[0][0]+", "+t[a].points[0][1]+")rotate("+t[a].angle+")").attr("class","pocket-object"):o.append("svg:image").attr("width",i(u.get(r).fingerWidth)).attr("height",i(u.get(r).fingerHeight)).attr("xlink:href","assets/images/"+r+".png").attr("transform-origin","top left").attr("transform","translate("+(t[a].points[0][0]+(i(u.get(r).fingerWidth)-l)/2)+", "+t[a].points[0][1]+")rotate("+t[a].angle+")").attr("class","pocket-object")}(e,t,n,r)}),c}};return c.init(),c});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};d3.selection.prototype.animateChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum();console.log({data:n});var i=0,a=0,o=d3.scaleLinear(),l=null,s=null,u=[];function c(t){var e=d3.select(this),n=[10,10],i=[10,10+o(t.value.maxHeightFront)],a=[10+o(t.value.maxWidthFront/2),o(t.value.maxHeightFront+2)+10],l=[10+o(.8*t.value.maxWidthFront),o(.8*t.value.maxHeightFront)+10],s=[10+o(t.value.maxWidthFront),o(t.value.minHeightFront)+10],c=[10+o(t.maxWidthFront),o(t.value.minHeightFront)+10],h=[10+o(t.value.maxWidthFront-3),o(t.value.maxHeightFront)+10],f=[10+o(t.value.maxWidthFront),o(t.value.rivetHeightFront)+10],g=[10+o(t.value.maxWidthFront),o(t.value.rivetHeightFront)+10],m=[10+o(t.value.minWidthFront/2),o(.4*t.value.maxWidthFront)+10],p=[10+o(t.value.maxWidthFront-t.value.minWidthFront),10],v=null,x=null;if("TRUE"==t.cutout){v=["M",n,"L",i,"L",h,"Q",l,c,"L",f,"Q",m,p,"L",n].join(" ");var b=d(h,l,c),y=d(f,m,p),F=d3.range(10).map(function(t,e,n){return b(t/(n.length-1))}),H=d3.range(10).map(function(t,e,n){return y(t/(n.length-1))});x=[n,i].concat(F).concat(H).concat([n])}else{v=["M",n,"L",i,"Q",a,s,"L",g,"Q",m,p,"L",n].join(" ");var w=d(i,a,s),W=d(g,m,p),k=d3.range(10).map(function(t,e,n){return w(t/(n.length-1))}),A=d3.range(10).map(function(t,e,n){return W(t/(n.length-1))});x=[n].concat(k).concat(A).concat([n])}var B=d3.range(125,160,5),j=d3plus.largestRect(x,{nTries:100,aspectRatio:.5,cache:!1}),M=d3plus.largestRect(x,{nTries:100,aspectRatio:.1,cache:!1}),E=d3plus.largestRect(x,{nTries:100,aspectRatio:.8,cache:!1}),_=d3plus.largestRect(x,{nTries:100,aspectRatio:.57,cache:!1,angle:B}),O=[t].map(function(t){return r({},t,{rectanglePhone:j,rectanglePen:M,rectangleWallet:E,rectangleHand:_})});u.push(O[0]),console.log({withRect:O}),e.append("path.outline").attr("d",v)}function d(t,e,n){return function(r){return[Math.pow(1-r,2)*t[0]+2*(1-r)*r*e[0]+Math.pow(r,2)*n[0],Math.pow(1-r,2)*t[1]+2*(1-r)*r*e[1]+Math.pow(r,2)*n[1]]}}var h=d3.map([{object:"phone",id:"iphone",width:7,height:14},{object:"wallet",id:"frontWallet",width:8.4,height:10.4},{object:"pen",id:"pen",width:1.5,height:14.5},{object:"hand",width:7.4,height:17.2},{object:"phone",id:"galaxy",width:6.9,height:14.7},{object:"phone",id:"pixel",width:7.6,height:15.7},{object:"hand",id:"menHand",width:7.7,height:13.4,fingerHeight:18.9,fingerWidth:9.8},{object:"hand",id:"womenHand",width:7,height:12,fingerHeight:17.2,fingerWidth:8.9}],function(t){return t.id}),f={init:function(){(l=e.append("svg")).attr("class",function(t){return"animate-chart animate-chart-"+t.key});var t=l.append("g");t.at("transform","translate(0, 0)"),l.append("g.g-axis"),s=t.append("g.g-vis"),f.resize(),f.render()},resize:function(){return console.log({$vis:s}),i=e.node().offsetWidth-0-0,a=e.node().offsetHeight-0-0,l.at({width:i+0+0,height:300}),o.domain([0,29]).range([0,225]),f},render:function(){return l.select(".g-vis").selectAll(".outline").data(function(t){return[t]}).enter().append("g").each(c),f},data:function(t){return arguments.length?(n=t,e.datum(n),f.render(),f):n},animate:function(t,e){var n=l.select(".g-vis");return n.selectAll(".pocket-object").remove(),n.selectAll(".outline-object").data(function(t){return[t]}).enter().append("g").each(function(n){var r=d3.select(this);!function(t,e,n,r){var l=n;console.log({rectData:u});var s=null;"phone"==e&&(s="rectanglePhone"),"pen"==e&&(s="rectanglePen"),"wallet"==e&&(s="rectangleWallet"),"hand"==e&&(s="rectangleHand");var c=l,d=o(h.get(r).width),f=o(h.get(r).height);console.log({rectArea:s}),u[0][s],console.log({objectWidth:d,objectHeight:f}),"hand"!=e?(c.append("svg:image").attr("width",d).attr("height",f).attr("xlink:href","assets/images/"+r+".png"),c.attr("transform","translate("+.75*i+", "+-a+")").transition().duration(500).attr("transform-origin","top left").attr("transform","translate("+u[0][s].points[0][0]+", "+u[0][s].points[0][1]+")rotate("+u[0][s].angle+")").attr("class","pocket-object")):(c.append("svg:image").attr("width",o(h.get(r).fingerWidth)).attr("height",o(h.get(r).fingerHeight)).attr("xlink:href","assets/images/"+r+".png"),c.attr("transform","translate("+.75*i+", "+-a+")").transition().duration(500).attr("transform-origin","top left").attr("transform","translate("+(u[0][s].points[0][0]+(o(h.get(r).fingerWidth)-d)/2)+", "+u[0][s].points[0][1]+")rotate("+u[0][s].angle+")").attr("class","pocket-object"))}(0,t,r,e)}),f}};return f.init(),f});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";var r,i;void 0===(i="function"==typeof(r=function(){return function(t){function e(){f=!1;var t=function(){if(u&&"number"==typeof u){var t=Math.min(Math.max(0,u),1);return m-t*m}return m}();(g=g.filter(function(e){var n=e.getBoundingClientRect().top<t;if(n&&!e.__enter_view){if(o(e),d)return!1}else!n&&e.__enter_view&&l&&l(e);return e.__enter_view=n,!0})).length||window.removeEventListener("scroll",n,!0)}function n(){f||(f=!0,h(e))}function r(){(function(){var t=document.documentElement.clientHeight,e=window.innerHeight||0;m=Math.max(t,e)})(),e()}function i(t){for(var e=t.length,n=[],r=0;r<e;r+=1)n.push(t[r]);return n}var a=t.selector,o=t.enter,l=t.exit,s=t.offset,u=void 0===s?0:s,c=t.once,d=void 0!==c&&c,h=null,f=!1,g=[],m=0;a&&o||console.error("must set selector and enter options"),h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof t?i(e.querySelectorAll(t)):t instanceof NodeList?i(t):t instanceof Array?t:void 0}(a),window.addEventListener("resize",r,!0),window.addEventListener("scroll",n,!0),r(),e()}})?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(17);var r=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),i=null,a=null,o=d3.selectAll(".fit-container"),l=o.selectAll(".fit-table");o.select(".ui-brand"),o.select(".ui-style"),o.select(".ui-price"),e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){i=t[0],function(){var t=l;a=i.sort(function(t,e){return d3.ascending(t.brand,e.brand)});var e=d3.nest().key(function(t){return t.menWomen}).entries(a);t.selectAll(".chart").data(e).enter().append("div.chart").at("data-object",null).rectChart()}()}).catch(function(t){return console.log(t)})},resize:function(){}}},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};d3.selection.prototype.rectChart=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),i=e.at("data-object"),a=0,o=d3.scaleLinear(),l=null,s=null,u=null,c=[];function d(t){var e=d3.select(this),n=[10,10],i=[10,10+o(t.maxHeightFront)],a=[10+o(t.maxWidthFront/2),o(t.maxHeightFront+2)+10],l=[10+o(.8*t.maxWidthFront),o(.8*t.maxHeightFront)+10],s=[10+o(t.maxWidthFront),o(t.minHeightFront)+10],u=[10+o(t.maxWidthFront),o(t.minHeightFront)+10],d=[10+o(t.maxWidthFront-3),o(t.maxHeightFront)+10],f=[10+o(t.maxWidthFront),o(t.rivetHeightFront)+10],g=[10+o(t.maxWidthFront),o(t.rivetHeightFront)+10],m=[10+o(t.minWidthFront/2),o(.4*t.maxWidthFront)+10],p=[10+o(t.maxWidthFront-t.minWidthFront),10],v=null,x=null;if("TRUE"==t.cutout){v=["M",n,"L",i,"L",d,"Q",l,u,"L",f,"Q",m,p,"L",n].join(" ");var b=h(d,l,u),y=h(f,m,p),F=d3.range(10).map(function(t,e,n){return b(t/(n.length-1))}),H=d3.range(10).map(function(t,e,n){return y(t/(n.length-1))});x=[n,i].concat(F).concat(H).concat([n])}else{v=["M",n,"L",i,"Q",a,s,"L",g,"Q",m,p,"L",n].join(" ");var w=h(i,a,s),W=h(g,m,p),k=d3.range(10).map(function(t,e,n){return w(t/(n.length-1))}),A=d3.range(10).map(function(t,e,n){return W(t/(n.length-1))});x=[n].concat(k).concat(A).concat([n])}var B=d3.range(150,180,5),j=d3plus.largestRect(x,{nTries:100,aspectRatio:.5,cache:!1}),M=d3plus.largestRect(x,{nTries:100,aspectRatio:.1,cache:!1}),E=d3plus.largestRect(x,{nTries:100,aspectRatio:.8,cache:!1}),_=d3plus.largestRect(x,{nTries:100,aspectRatio:.57,cache:!1,angle:B}),O=[t].map(function(t){return r({},t,{rectanglePhone:j,rectanglePen:M,rectangleWallet:E,rectangleHand:_})});c.push(O[0]),e.append("path.outline").attr("d",v),e.append("path.largestRect").attr("d",function(t){return["M",E.points[0],"L",E.points[1],"L",E.points[2],"L",E.points[3],"L",E.points[4]].join(" ")})}function h(t,e,n){return function(r){return[Math.pow(1-r,2)*t[0]+2*(1-r)*r*e[0]+Math.pow(r,2)*n[0],Math.pow(1-r,2)*t[1]+2*(1-r)*r*e[1]+Math.pow(r,2)*n[1]]}}var f=d3.map([{object:"phone",width:7,height:14}],function(t){return t.object}),g={init:function(){e.append("text.tk-atlas.text-menWomen").text(function(t){return t.key+"'s"});var t=e.append("div.container");u=t.selectAll(".fit-brand").data(function(t){return t.values}).enter().append("div.area-front").attr("class","fit-brand visible"),s=u.append("div.display");var n=u.append("div.tooltip");l=s.append("svg.fit-canvas");var r=s.append("div.text");r.append("text.brand.tk-atlas").text(function(t){return t.brand}),r.append("text.style.tk-atlas").text(function(t){return t.updatedStyle});var i=n.append("div.tooltip-text"),a=d3.format("$.2f");i.append("text.tk-atlas").text(function(t){return t.name}),i.append("text.tk-atlas").text(function(t){return""+a(t.price)}),i.append("text.tk-atlas").text(function(t){return t.fabric}),l.append("g").append("g.g-vis"),g.resize(),g.render()},resize:function(){return a=s.node().offsetWidth-0-0,s.node().offsetHeight,l.at({width:a+0+0,height:300}),o.domain([0,29]).range([0,225]),g},render:function(){var t=l.select(".g-vis");return t.selectAll(".outline").data(function(t){return[t]}).enter().append("g").each(d),"women"==n.key&&(window.outputW=JSON.stringify(c)),"men"==n.key&&(window.outputM=JSON.stringify(c)),t.selectAll(".measure measure-maxHeight").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.maxHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","end").attr("transform",function(t){return"translate(5, "+o(t.maxHeightFront/2)+")"}).attr("class","tk-atlas measure measure-maxHeight"),t.selectAll(".measure measure-minHeight").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.minHeightFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","start").attr("transform",function(t){return"translate("+(o(t.maxWidthFront)+15)+", "+o(t.rivetHeightFront+(t.minHeightFront-t.rivetHeightFront)/2)+")"}).attr("class","tk-atlas measure measure-minHeight"),t.selectAll(".measure measure-maxWidth").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.maxWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("transform",function(t){return"translate("+(o(t.maxWidthFront/2)+10)+", "+(o(t.maxHeightFront)+25)+")"}).attr("class","tk-atlas measure measure-maxWidth"),t.selectAll(".measure measure-minWidth").data(function(t){return[t]}).enter().append("text").text(function(t){return d3.round(.393*t.minWidthFront,1)+'"'}).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("transform",function(t){return"translate("+(o(t.maxWidthFront-t.minWidthFront+t.minWidthFront/2)+10)+", "+o(t.rivetHeightFront/2)+")"}).attr("class","tk-atlas measure measure-minWidth"),t.node().getBBox().width,t.attr("transform",function(e){var n=this.getBBox().width,r=t.selectAll(".measure-maxHeight").node().getBBox().width;return"translate("+((a-n)/2+r/2)+", 0)"}),g},data:function(t){return arguments.length?(n=t,e.datum(n),g.render(),g):n},toggle:function(t,e,n){return u.classed("visible",function(r){return!(r.brand!=t&&"All"!=t||r.style!=n&&"All"!=n||r.priceGroup!=e&&"All"!=e)}),g},dim:function(){return u.select(".display").classed("dimmed",function(t){var e=f.get(i).width,n=f.get(i).height,r=d3.select(this).select(".outline").at("d");if(d3plus.path2polygon(r,[20]),t.minWidthFront,t.minHeightFront,t.rivetHeightFront,t.minWidthFront<e||t.maxHeightFront<n)return!0}),g}};return g.init(),g});return e.length>1?e:e.pop()}}]);